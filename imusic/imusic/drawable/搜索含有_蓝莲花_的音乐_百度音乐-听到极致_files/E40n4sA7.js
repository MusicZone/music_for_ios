window["BAIDU_DAN_config"]=window["BAIDU_DAN_config"]||{};window["BAIDU_DAN_config"]["zIndex"]=1;if(typeof JSON!=="object"){JSON={}}(function(){"use strict";function f(e){return e<10?"0"+e:e}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(e){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(e){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(e){escapable.lastIndex=0;return escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return typeof t==="string"?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,i,o,r,a=gap,s,l=t[e];if(l&&typeof l==="object"&&typeof l.toJSON==="function"){l=l.toJSON(e)}if(typeof rep==="function"){l=rep.call(t,e,l)}switch(typeof l){case"string":return quote(l);case"number":return isFinite(l)?String(l):"null";case"boolean":case"null":return String(l);case"object":if(!l){return"null"}gap+=indent;s=[];if(Object.prototype.toString.apply(l)==="[object Array]"){r=l.length;for(n=0;n<r;n+=1){s[n]=str(n,l)||"null"}o=s.length===0?"[]":gap?"[\n"+gap+s.join(",\n"+gap)+"\n"+a+"]":"["+s.join(",")+"]";gap=a;return o}if(rep&&typeof rep==="object"){r=rep.length;for(n=0;n<r;n+=1){if(typeof rep[n]==="string"){i=rep[n];o=str(i,l);if(o){s.push(quote(i)+(gap?": ":":")+o)}}}}else{for(i in l){if(Object.prototype.hasOwnProperty.call(l,i)){o=str(i,l);if(o){s.push(quote(i)+(gap?": ":":")+o)}}}}o=s.length===0?"{}":gap?"{\n"+gap+s.join(",\n"+gap)+"\n"+a+"}":"{"+s.join(",")+"}";gap=a;return o}}if(typeof JSON.stringify!=="function"){JSON.stringify=function(e,t,n){var i;gap="";indent="";if(typeof n==="number"){for(i=0;i<n;i+=1){indent+=" "}}else if(typeof n==="string"){indent=n}rep=t;if(t&&typeof t!=="function"&&(typeof t!=="object"||typeof t.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":e})}}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;function walk(e,t){var n,i,o=e[t];if(o&&typeof o==="object"){for(n in o){if(Object.prototype.hasOwnProperty.call(o,n)){i=walk(o,n);if(i!==undefined){o[n]=i}else{delete o[n]}}}}return reviver.call(e,t,o)}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}})();(function(e){e.ting=e.ting||{};(function(e){e.ting=e.ting||{};var t=function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};e.extend(e.ting,{encodeHTML:t})})(jQuery);(function(e){e.ting=e.ting||{};var t=function(e){return String(e).replace(/&quot;/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")};e.extend(e.ting,{decodeHTML:t})})(jQuery);(function(e){e.ting=e.ting||{};function t(e){e=e.replace(/(\u000A|\u000D)/gm,"[br]");e=e.replace(/\s/g,"[nbsp]");return e}function n(e){e=e.replace(/\[i\]/g,"<i>");e=e.replace(/\[\/i\]/g,"</i>");e=e.replace(/\[b\]/g,"<b>");e=e.replace(/\[\/b\]/g,"</b>");e=e.replace(/\[em\]/g,"<em>");e=e.replace(/\[\/em\]/g,"</em>");e=e.replace(/\[u\]/g,"<u>");e=e.replace(/\[\/u\]/g,"</u>");e=e.replace(/\[br\]/g,"<br>");e=e.replace(/\[q\]/g,"<q>");e=e.replace(/\[\/q\]/g,"</q>");e=e.replace(/\[nbsp\]/g,"&nbsp;");return e}function i(e){var t="^((https|http|ftp|rtsp|mms)?://)"+"?(([0-9a-z_!~*'().&amp;=+$%-]+: )?[0-9a-z_!~*'().&amp;=+$%-]+@)?"+"(([0-9]{1,3}.){3}[0-9]{1,3}"+"|"+"([0-9a-z_!~*'()-]+.)*"+"([0-9a-z][0-9a-z-]{0,61})?[0-9a-z]."+"[a-z]{2,6})"+"(:[0-9]{1,4})?"+"((/?)|"+"(/[0-9a-z_!~*'().;?:@&amp;=+$,%#-]+)+/?)$";var n=new RegExp(t);if(n.test(e)){return true}else{return false}}var o=function(t){$mask=e("<div>").attr("class","ajax-mask").css("height",t.height());$maskBox=e("<div>").attr("class","ajax-mask-box").html("加载中...");t.css({position:"relative",zoom:1}).append($mask).append($maskBox)};var r=function(t){$mask=e("<div>").attr("class","ajax-mask");$maskBox=e("<div>").attr("class","ajax-mask-box");e(".ajax-mask",t).remove();e(".ajax-mask-box",t).remove()};e.extend(e.ting,{isURL:i,text2Ubb:t,decodeUbb:n,createMask:o,removeMask:r})})(jQuery);(function(e){e.ting=e.ting||{};var t=function(e){return String(e).replace(/[^\x00-\xff]/g,"mz").length};function n(e,n,i){if(t(e)<=n)return e;var o=Math.floor(n/2);for(var r=o;r<e.length;r++){if(e.substr(0,r).replace(/[^\x00-\xff]/g,"mz").length>=n){return e.substr(0,r)+i||""}}return e}e.extend(e.ting,{byteLength:t,subByte:n})})(jQuery);(function(e){e.ting=e.ting||{};var t=function(){var e={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function n(t){if(/["\\\x00-\x1f]/.test(t)){t=t.replace(/["\\\x00-\x1f]/g,function(t){var n=e[t];if(n){return n}n=t.charCodeAt();return"\\u00"+Math.floor(n/16).toString(16)+(n%16).toString(16)})}return'"'+t+'"'}function i(e){var n=["["],i=e.length,o,r,a;for(r=0;r<i;r++){a=e[r];switch(typeof a){case"undefined":case"function":case"unknown":break;default:if(o){n.push(",")}n.push(t(a));o=1}}n.push("]");return n.join("")}function o(e){return e<10?"0"+e:e}function r(e){return'"'+e.getFullYear()+"-"+o(e.getMonth()+1)+"-"+o(e.getDate())+"T"+o(e.getHours())+":"+o(e.getMinutes())+":"+o(e.getSeconds())+'"'}return function(e){switch(typeof e){case"undefined":return"undefined";case"number":return isFinite(e)?String(e):"null";case"string":return n(e);case"boolean":return String(e);default:if(e===null){return"null"}else if(e instanceof Array){return i(e)}else if(e instanceof Date){return r(e)}else{var o=["{"],a=t,s,l;for(key in e){if(e.hasOwnProperty(key)){l=e[key];switch(typeof l){case"undefined":case"unknown":case"function":break;default:if(s){o.push(",")}s=1;o.push(a(key)+":"+a(l))}}}o.push("}");return o.join("")}}}}();e.ting.songIdConvert=function(e){return+e+73819e3};e.extend(e.ting,{stringify:function(e){return t(e)}})})(jQuery)})(jQuery);var ting=ting||{};(function(e){var t={},n={},i=window.location.href.replace(/(http:\/\/[^\/\\]+)([\/\\].*)/g,"$1");var o=function(){var e={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",rowspan:"rowSpan",valign:"vAlign",usemap:"useMap",frameborder:"frameBorder"};var t=navigator.userAgent,n=/(msie) ([\w.]+)/.exec(t.toLowerCase());if(n&&n[1]&&n[2]&&(!document.documentMode||document.documentMode<8)){e["for"]="htmlFor";e["class"]="className"}else{e.htmlFor="for";e.className="class"}return e}();var r=function(e){if("string"==typeof e||e instanceof String){return document.getElementById(e)}else if(e&&e.nodeName&&(e.nodeType==1||e.nodeType==9)){return e}return null};var a=function(e){return String(e).replace(new RegExp("([.*+?^=!:${}()|[\\]/\\\\])","g"),"\\$1")};var s=function(e,t,n){e=r(e);if("style"==t){e.style.cssText=n}else{t=o[t]||t;e.setAttribute(t,n)}return e};var l=function(e,t){var n;e=r(e);for(n in t){if(t.hasOwnProperty(n)){s(e,n,t[n])}}return e};var c=function(e,t){e=r(e);var n=t.split(/\s+/),i=e.className,o=" "+i+" ",a=0,s=n.length;for(;a<s;a++){if(o.indexOf(" "+n[a]+" ")<0){i+=(i?" ":"")+n[a]}}e.className=i;return e};var u=function(e,t){var n=document.createElement(e),i=t||{};return l(n,i)};var d=function(e,t,n){var i=[],o=function(e){var t=new RegExp("(^[\\s\\t\\xa0\\u3000]+)|([\\u3000\\xa0\\s\\t]+$)","g");return String(e).replace(t,"")},s,l,c,u;if(!(e=o(e))){return i}if("undefined"==typeof t){t=document}else{t=r(t);if(!t){return i}}if(n){n=o(n).toUpperCase()}if(t.getElementsByClassName){c=t.getElementsByClassName(e);s=c.length;for(l=0;l<s;l++){u=c[l];if(n&&u.tagName!=n){continue}i[i.length]=u}}else{e=new RegExp("(^|\\s)"+a(e)+"(\\s|$)");c=n?t.getElementsByTagName(n):t.all||t.getElementsByTagName("*");s=c.length;for(l=0;l<s;l++){u=c[l];if(e.test(u.className)){i[i.length]=u}}}return i};var f=function(e,t,n){var i=d(e,t,n);if(i&&i[0]){return i[0]}return null};var p=function(e){return e+"px"};var g={ele:null,mask:null,boxSize:null,init:function(e,t){this.boxSize=t||{width:500,height:300};this.ele=this.getElement(e);this.mask=this.mask||this.createMask()},getElement:function(e){var t=this.boxSize;return{dom:e,show:function(){var e=g.position(t.width,t.height),n=this.dom;n.style.width=p(t.width);n.style.top=p(e.top);n.style.left=p(e.left);n.style.display="block"},hide:function(){this.dom.style.display="none"}}},createMask:function(){var e=document,t=e.body,n=e.documentElement,i=e.compatMode==="BackCompat"?t:e.documentElement,o=e.createElement("div");t.insertBefore(o,t.childNodes[0]);o.style.display="none";o.className="popup-mask";return{layer:o,show:function(){var e=Math.max(n.scrollHeight,t.scrollHeight,i.clientHeight),o=Math.max(n.scrollWidth,t.scrollWidth,i.clientWidth),r=this.layer;r.style.width=p(o);r.style.height=p(e);g.animateShow(r)},hide:function(){this.layer.style.display="none"}}},show:function(){if(this.ele){this.ele.show()}if(this.mask){this.mask.show()}},hide:function(){if(this.ele){this.ele.hide()}if(this.mask){this.mask.hide()}},position:function(e,t){var n=document,i=n.compatMode==="BackCompat"?n.body:n.documentElement,o=(i.clientWidth-e)/2,r=(i.clientHeight-t)/2;o+=window.pageXOffset||n.documentElement.scrollLeft||n.body.scrollLeft;r+=window.pageYOffset||n.documentElement.scrollTop||n.body.scrollTop;r=r<0?5:r;return{top:r,left:o}},animateShow:function L(e){var t=e.className,n=0,i;e.className=t+" account-ts0";e.style.display="block";i=setInterval(function(){n+=1;if(n===4){clearInterval(i)}e.className=t+" account-ts"+n},30)}};var h=function(e){h.prototype.init.call(this,e)};var m=h.prototype;m.init=function(e){var t;if(!e){return}for(t in e){if(e.hasOwnProperty(t)){this[t]=e[t]}}};m.render=function(){var e;if(this.base&&this.base.render){e=this.base.render()}return this.myRender(e)};m.getBoxSize=function(){if(this.boxSize){return this.boxSize}else if(this.base&&this.base.getBoxSize){return this.base.getBoxSize()}return null};m.all=function(e){var t=[],n=this;while(n){if(n[e]){t.push(n[e])}n=n.base}return t};var v=function(e){var t=this;m.init.call(this,e);this.myRender=function(){var e={onFillInUsernameSuccess:function(){var e=ting.passport.lastCallback;e.onClose();if(e.onSuccess){e.onSuccess(ting.userInfo)}},onGetErr:function(e){var t=e+"";switch(t){case"160100":case"160111":case"160110":break}},onReady:function(){var e=ting.passport.lastCallback,t;if(t=r("pass_fillinusername_submit_input")){t.value="确定"}if(e.onReady){e.onReady()}}},t=ting.passport.lastOptions,n=t&&t.container?t.container:"fillinusername_holder"}};v.prototype=new h;var b=function(e){var t=this;m.init.call(this,e);this.myRender=function(e){var t={onRealizeUserSuccess:function(){var e=ting.passport.lastCallback;e.onClose();if(e.onSuccess){e.onSuccess(ting.userInfo)}},onGetErr:function(e){var t=e+"";switch(t){case"160100":case"160111":case"160110":break}},onReady:function(){var e=ting.passport.lastCallback,t;if(t=r("pass_fillinusername_submit_input")){t.value="确定"}if(e.onReady){e.onReady()}}},n=ting.passport.lastOptions,i=n&&n.container?n.container:"fillinusername_holder"}};b.prototype=new h;var y=function(e){m.init.call(this,e);this.myRender=function(e){return e}};y.prototype=new h;var w=function(e){m.init.call(this,e);this.myRender=function(e){var t=f("account-popup-holder")||u("div",{className:"account-popup-holder"}),n;c(t,"account-popup-holder-no-user");t.innerHTML=['<div class="account-ptitle">','    <span class="account-ptitle-text"></span>','    <a class="account-pclose" href="#" title="关闭窗口"></a>',"</div>",'<div class="account-pbody"></div>'].join("");n=f("account-pclose",t);n.onclick=function(){var e=ting.passport.lastCallback;e.onClose();if(e.onAbstractCancel){e.onAbstractCancel()}return false};return t}};w.prototype=new h;var k=function(e){m.init.call(this,e);this.boxSize={width:380,height:340};this.myRender=function(e){var t=e,n=f("account-pbody",t),i=f("account-ptitle-text",t);c(n,"account-pbody-no-u");i.innerHTML="未绑定真实信息";n.innerHTML=['<div class="action-holder no-u-holder">','   <div class="action-title-holder no-u-title-holder">','        <span class="account-t2 no-u-t2"></span>','        <span class="action-title-tip no-u-title-tip">您还未绑定邮箱或手机号，为了保障您的账户安全，建议您立即进行<a class="account-link" href="http://passport.baidu.com/v2/accountsecurity?u='+encodeURIComponent("http://music.baidu.com")+'" target="_blank" title="安全设置">安全设置</a></span>',"    </div>","</div>"].join("");ting.passport.lastCallback.onAbstractCancel=function(){var e=ting.passport.lastCallback;if(e.onRealizeUserCancel){e.onRealizeUserCancel()}if(e.onCancel){e.onCancel()}};var o=f("account-link",t);o.onclick=function(){var e=ting.passport.lastCallback;e.onClose();if(e.onAbstractCancel){e.onAbstractCancel()}};return t}};k.prototype=new h;var x=function(e){var t=this;m.init.call(this,e);this.myRender=function(e){var t={onRealizeUserSuccess:function(){var e=ting.passport.lastCallback;e.onClose();if(e.onSuccess){e.onSuccess(ting.userInfo)}},onGetErr:function(e){var t=e+"";switch(t){case"160100":case"160111":case"160110":break}},onReady:function(){var e=ting.passport.lastCallback,t;if(t=r("pass_fillinusername_submit_input")){t.value="确定"}if(e.onReady){e.onReady()}}},n=ting.passport.lastOptions,i=n&&n.container?n.container:"fillinusername_holder"}};x.prototype=new h;var _=function(e){m.init.call(this,e);this.boxSize={width:380,height:340};this.myRender=function(e){var t=e,n=f("account-pbody",t),i=f("account-ptitle-text",t);c(n,"account-pbody-no-u");i.innerHTML="补全个人信息";n.innerHTML=['<div class="action-holder no-u-holder">','   <div class="action-title-holder no-u-title-holder">','        <span class="account-t2 no-u-t2"></span>','        <span class="action-title-tip no-u-title-tip">您正在使用第三方账号登陆，为了更好的使用VIP付费服务，请先到<a class="account-link" href="http://passport.baidu.com/v2/?binding&showtype=email&u='+encodeURIComponent("http://music.baidu.com")+'" target="_blank" title="用户中心">用户中心</a>补全个人信息吧。</span>',"    </div>","</div>"].join("");ting.passport.lastCallback.onAbstractCancel=function(){var e=ting.passport.lastCallback;if(e.onRealizeUserCancel){e.onRealizeUserCancel()}if(e.onCancel){e.onCancel()}};var o=f("account-link",t);o.onclick=function(){var e=ting.passport.lastCallback;e.onClose();if(e.onAbstractCancel){e.onAbstractCancel()}};return t}};_.prototype=new h;var C=function(e){m.init.call(this,e);this.boxSize={width:380,height:340};this.myRender=function(e){var t=e,n=f("account-pbody",t),i=f("account-ptitle-text",t);c(n,"account-pbody-no-u");i.innerHTML="补填用户名";n.innerHTML=['<div class="action-holder no-u-holder">','   <div class="action-title-holder no-u-title-holder">','        <span class="account-t2 no-u-t2"></span>','        <span class="action-title-tip no-u-title-tip">欢迎来到百度，您还没有用户名哦，快<a class="account-link" href="http://passport.baidu.com/v2/?ucenteradduname&u='+encodeURIComponent("http://music.baidu.com")+'" target="_blank" title="补填用户名">点击这里</a>起一个吧！</span>',"    </div>","</div>"].join("");ting.passport.lastCallback.onAbstractCancel=function(){var e=ting.passport.lastCallback;if(e.onFillinUserNameCancel){e.onFillinUserNameCancel()}if(e.onCancel){e.onCancel()}};var o=f("account-link",t);o.onclick=function(){var e=ting.passport.lastCallback;e.onClose();if(e.onAbstractCancel){e.onAbstractCancel()}};return t}};C.prototype=new h;var S={fillinUserName:{normal:[C]},realizeUser:{normal:[_]},bindRealInfo:{normal:[k]}};var I=function(e,t){var n=e.pop();while(n){n.apply(null,t);n=e.pop()}};n.escapeReg=function(e){return String(e).replace(new RegExp("([.*+?^=!:${}()|[\\]/\\\\])","g"),"\\$1")};n.isString=function(e){return typeof e==="object"&&e&&e.constructor===String||typeof e==="string"};n.parseQuery=function(e,t){if(t){var i=new RegExp("(^|&|\\?|#)"+n.escapeReg(t)+"=([^&]*)(&|$)",""),o=e.match(i);if(o){return o[2]}}else{if(e){e=e.substr(e.indexOf("?")+1,e.length);var r=e.split("&");var a={},s=[],l,c,u,d;for(d=0;d<r.length;d++){l=r[d].split("=");c=l[0];u=l[1];if(c===""){continue}if(typeof a[c]==="undefined"){a[c]=u}else{if(n.isString(a[c])){continue}else{a[c].push(u)}}}return a}}return null};n.sioGet=function(e,t){var i,o,r,a,s;if(!e||!n.isString(e)){return null}i=n.parseQuery(e,"callback");o=document.createElement("SCRIPT");if(!i){r=false;o.onreadystatechange=o.onload=function(){if(r){return false}if(typeof o.readyState==="undefined"||o.readyState==="loaded"||o.readyState==="complete"){r=true;try{t()}finally{if(o&&o.parentNode){o.parentNode.removeChild(o)}o.onreadystatechange=null;o.onload=null;o=null}}}}else{a="CB"+Math.floor(Math.random()*2147483648).toString(36);e=e.replace(/(&|\?)callback=([^&]*)/,"$1callback="+a);window[a]=function(){try{var e=t||window[i];e.apply(null,arguments)}finally{if(o&&o.parentNode){o.parentNode.removeChild(o)}o=null;window[a]=null}}}o.src=e;o.type="text/javascript";o.charset="gb2312";s=document.getElementsByTagName("HEAD")[0];s.insertBefore(o,s.firstChild)};n.refreshUserBar=function(){if(ting.refreshUserBar){ting.refreshUserBar()}};n.setLoginedCookie=function(){try{if(window.jQuery){jQuery.cookie("u_lo","1",{path:"/",expires:30});jQuery.cookie("u_id",ting.userInfo.userId,{path:"/",expires:30});jQuery.cookie("u_t",ting.userInfo.userType,{path:"/",expires:30})}}catch(e){}};t.render=function(e,t,n,i,o){var r={fillinUserName:v,realizeUser:b,bindRealInfo:x},a=r[e],s=new a({base:o||new y});s.render()};t.popupLogin=function(e,t,n){var o=this,r;r=function(e){var t=ting.passport.lastCallback;ting.userInfo=e;if(t.onSuccess){t.onSuccess(e)}};if(!this.loginInstance){$.getScript("http://passport.baidu.com/passApi/js/uni_login_wrapper.js?cdnversion="+(new Date).getTime(),function(){o.loginInstance=passport.pop.init({tangram:true,cache:true,apiOpt:{product:"music",staticPage:i+"/static/html/pass_jump_v3.html",memberPass:true,u:window.location.href},forgetLink:"https://passport.baidu.com/?getpass_index",registerLink:"https://passport.baidu.com/v2/?reg&regType=1",authsite:["tsina","qzone","renren"],img:"//mu7.bdstatic.com/static/i/7mqo8tiZ.jpg",onLoginSuccess:function(e){e.returnValue=false;$(document).trigger("logined");if(n.pos==="userbar"){$(document).trigger("userbarlogined")}o.loginInstance.hide();r();o.loginInstance.destroy()},onShow:function(){},onHide:function(){var e=ting.passport.lastCallback;if(e&&e.onCancel){e.onCancel.call()}}});o.loginInstance.show()})}else{o.loginInstance.show()}};t.popup=function(e,t,n){t=t||{};t.onClose=function(){g.hide()};ting.passport.lastCallback=t;ting.passport.lastOptions=n;if(e=="login"){this.popupLogin(e,t,n);return}var i=this,o=new w,r=S[e],a=r.normal,s=ting.passport.lastDom||null,l,c,u,d,f,p;for(d=0;d<a.length;d++){o=new a[d]({base:o})}if(s){document.body.removeChild(s)}l=o.render();u=o.getBoxSize();stack=o.all("onReady");c=function(e){m.init.call(this,e);this.myRender=function(){return l};this.onReady=function(e){var t=[],n,i;for(n=0,i=stack.length;n<i;n+=1){t[n]=stack[n]}I(t,arguments)}};c.prototype=new h;p=function(){document.body.insertBefore(l,document.body.childNodes[0]);ting.passport.lastDom=l;g.init(l,u);g.show();ting.passport.render(e,null,t,n,new c)};p()};t.checkLogin=function(e,t){var i=ting.userInfo,o,r,a;if(arguments.length<=2){r=e;a=t||{}}else{r={onSuccess:arguments[0],onFailure:arguments[1],onCancel:arguments[2],onPassportSuccess:arguments[3]};a=arguments[4]||{}}o=r.onSuccess;r.onSuccess=function(e){e=e||{};e.login=true;e.active=true;ting.userInfo=e;n.refreshUserBar();n.setLoginedCookie();if(!!a&&a.needBdName&&(!ting.userInfo||!ting.userInfo.bdName)){r.onSuccess=o;ting.passport.checkBdName(r,a)}else{if(o){o(e)}}};if(i===null||i===undefined){$.ajax({url:"/data/user/info",dataType:"jsonp",success:function(e){if(e.errorCode==22452){ting.passport.popup("login",r,a)}else{ting.userInfo=e.data;if(r.onSuccess){r.onSuccess(ting.userInfo)}}}})}else{if(r.onSuccess){r.onSuccess(i)}}};t.login=function(){t.checkLogin(function(){window.location.reload()},function(){},function(){},function(){})};t.checkBdName=function(e,t){$.ajax({url:"/data/user/info",dataType:"jsonp",success:function(i){var o=i.data,r=e,a=t,s;s=r.onSuccess;r.onSuccess=function(e){if(e){e=e||{};ting.userInfo=e}n.refreshUserBar();if(s){s(e)}};if(o&&o.bdName&&o.bdName.length>0){r.onSuccess(o)}else{ting.passport.popup("fillinUserName",r,a)}}})};e.passport=t})(ting);var ting=ting||{};ting.errorMap={"-1":"请求失败","-2":"登陆失败",22001:"操作失败  ",22005:"参数错误  ",22006:"留言信息超长",22007:"名称不能为空",22051:"socket连接失败 ",22052:"socket写失败",22053:"socket读失败",22054:"mysql连接失败",22055:"sql语句错误 ",22101:"search服务器连接失败  ",22201:"连接图片服务器失败 ",22202:"图片过大 ",22203:"图片过小 ",22204:"不允许上传的图片格式",22231:"您的输入含有不适当内容，请重新输入 ",22281:"不能关注自己 ",22282:"已经关注过 ",22301:"非法的推荐类型 ",22322:"请勿重复收藏 ",22402:"无删除权限",22451:"更新头像失败",22452:"用户未登录  ",22453:"用户未激活  ",22454:"用户已删除  ",22455:"获取用户passport信息失败  ",22456:"添加用户基本信息失败  ",22457:"分配Ting Uid失败",22458:"用户已激活",22461:"您已被限制评论，如有任何问题，欢迎发送邮件到musichelp@baidu.com",22706:"半帐号用户",22671:"歌曲信息不能为空 ",22672:"非法的自选辑代号 ",22673:"创建自选辑失败 ",22674:"获取用户自选辑时，用户id错误 ",22676:"最多创建1000张自选辑",22283:"最多关注1000人",22011:"您操作的太快了，请稍候再试。",22311:"最多推荐歌曲50000首",22312:"最多推荐专辑5000张",22313:"最多推荐自选辑5000张",22314:"最多推荐 50000个人",22015:"请不要重复评论，谢谢！",22016:"您操作的过于频繁，请稍候再试",22331:"空间已达上限",22332:"最多收藏5000张专辑",22333:"最多收藏5000张自选辑",22231:"您的输入含有不适当内容，请重新输入",22860:"不是有效的顶踩数据",22861:"过期啦",22863:"已经操作过啦!",22012:"该内容已下架",22014:"验证码错误",22678:"歌单名称重复"};var ting=ting||{};void function(e){function t(e,t,i,o,r,a,s,l,c){ting.passport.checkLogin(function(){n(e,t,i,o,r,a,s,l,c)},function(){},function(){var e={};e.query=t;a&&a(e)},function(){},{ref:"pop_web",operation:!!s,needBdName:!!l})}function n(n,i,o,r,a,s,l,c,u){r=r||e.noop;a=a||e.noop;s=s||e.noop;var d=[];for(var f in i){d.push(f+"="+encodeURIComponent(i[f]))}d.push(".r="+Math.random()+new Date*1);var p=n+"?"+d.join("&");e.ajax({url:p,data:o,type:o?"post":"get",async:u===false?u:true,dataType:"json",success:function(e){if(!e)return;var u=e.errorCode;if(u==22452||u==22453){if(u==22452){ting.userInfo=null}else if(u==22453){if(ting.userInfo){ting.userInfo.active=false}}t(n,i,o,r,a,s,l,c)}else{if(u==22e3||u==22706){r(e)}else{e.errorMessage=ting.errorMap[u];a(e)}}},error:function(e,t,n){var o={};o.query=i;o.errorCode=-1;o.errorMessage="请求失败";a(o)}})}var i={};var o={getUserInfo:{url:"user/info",needLogin:true},editStatus:{url:"user/editStatus",needLogin:true},collect:{url:"user/collect",needLogin:true,isOperation:true},collectPlaylist:{url:"user/playlist",needLogin:true,isOperation:true},getcollect:{url:"user/isCollect",needLogin:false},collection:{url:"user/collection",needLogin:true},collectionSongIds:{url:"user/collectionSongIds",needLogin:true},deleteCollection:{url:"user/deleteCollection",needLogin:true,isOperation:true},batchfollow:{url:"user/batchfollow",needLogin:true},follow:{url:"user/follow",needLogin:true,isOperation:true},unfollow:{url:"user/unfollow",needLogin:true,isOperation:true},deleteNotice:{url:"user/deleteNotice",needLogin:true},deleteAllNotice:{url:"user/deleteAllNotice",needLogin:true},sendMessage:{url:"user/sendMessage",needLogin:true},deleteMessage:{url:"user/deleteMessage",needLogin:true},isReadMsg:{url:"user/isReadMsg",needLogin:true},downloadSong:{url:"music/downloadLink",needLogin:true,isOperation:true},getProgram:{url:"fm/getProgram",needLogin:false},checkArtist:{url:"fm/artistExist",needLogin:false},recommend:{url:"user/recommend",needLogin:true,isOperation:true},deleteRecommend:{url:"user/deleteRecommend",needLogin:true,isOperation:true},recommendtopic:{url:"user/recommendtopic",needLogin:true},starAttention:{url:"user/starAttention",needLogin:false},artistAction:{url:"user/artistAction",needLogin:true},bannerSave:{url:"artist/bannerSave",needLogin:true},getComment:{url:"comment/get",needLogin:false},getCommentList:{url:"comment/list",needLogin:false},addComment:{url:"comment/add",needLogin:true,isOperation:true,needBdName:true},deleteComment:{url:"comment/delete",needLogin:true,isOperation:true,needBdName:true},deleteBanner:{url:"user/deleteBanner",needLogin:true},deletePhoto:{url:"user/deletephoto",needLogin:true},getSong:{url:"music/song",needLogin:false},getAlbum:{url:"music/album",needLogin:false},getDiy:{url:"music/diy",needLogin:false},getTopList:{url:"music/topList",needLogin:false},search:{url:"music/search",needLogin:false},getSonglistCollect:{url:"music/songlist/list",needLogin:false},addDiy:{url:"diy/add",needLogin:true,isOperation:true,needBdName:true},editDiy:{url:"diy/edit",needLogin:true,isOperation:true,needBdName:true},deleteDiy:{url:"diy/delete",needLogin:true,isOperation:true,needBdName:true},countDiy:{url:"diyalbum/count",needLogin:true},topicUpd:{url:"user/topicUpd",needLogin:true},getTopicUpd:{url:"topic/getTopicUpd",needLogin:false},applyForInvitation:{url:"user/applyForInvitation",needLogin:false},setProperty:{url:"property/set",needLogin:true},editUserProfile:{url:"user/editUserProfile",needLogin:true},editArtistProfile:{url:"user/editArtistProfile",needLogin:true},editUserAvatar:{url:"user/editUserAvatar",needLogin:true},plazaActiveStarAttention:{url:"user/plazaActiveStarAttention",needLogin:false},getMSNContactList:{url:"user/msnContactList",needLogin:true},getEmailContactList:{url:"user/emailContactList",needLogin:true},downloadlimit:{url:"user/downloadlimit",needLogin:true},sendMail:{url:"user/sendMail",needLogin:true},getArtistSong:{url:"user/getsongs",needLogin:false},getArtistHotSongIds:{url:"user/gethotsongids",needLogin:false},getArtistAlbum:{url:"user/getalbums",needLogin:false},getArtistMV:{url:"user/getmvlist",needLogin:false},getArtistPhotos:{url:"user/getphotos",needLogin:false},getArtistPhotosData:{url:"user/getphotosdata",needLogin:false},userPower:{url:"user/power",needLogin:false},downPower:{url:"user/downpower",needLogin:true},contribution:{url:"user/kingtotal",needLogin:true},getMv:{url:"music/getmv",needLogin:false},paymentSum:{url:"service/sum",needLogin:false},paymentCheckStatus:{url:"service/stats",needLogin:false},paymentEasy:{url:"service/kuaijie",needLogin:false},paymentExchange:{url:"duihuan",needLogin:false},receiveCheckStatus:{url:"gift/check",needLogin:true},getReceive:{url:"gift/give",needLogin:true},getCloud:{url:"/gift/give/cloud",needLogin:true},getStyleSongs:{url:"genres/getsongs",needLogin:false},getStyleAlbums:{url:"genres/getalbums",needLogin:false},vipSpread:{url:"user/tips",needLogin:false},iqiyi:{url:"iqiyi",needLogin:true},getVipSevenDays:{url:"gift/invite",needLogin:true},getNewTopList:{url:"music/newtop",needLogin:false},recorddown:{url:"module/song/recorddown",needLogin:false},getGroupSong:{url:"music/getgroupsong",needLogin:false},getClusterSong:{url:"music/getclustersong",needLogin:false},getDevice:{url:"module/song/getdevice",needLogin:true},deleteDevice:{url:"module/song/deldevice",needLogin:true},sendSongBySMS:{url:"module/song/send2tel",needLogin:true},sendSongByWireless:{url:"module/song/send2telphone",needLogin:true},getOrderId:{url:"mpc/genorder",needLogin:true}};var r="/data/";for(var a in o){var s=o[a];var l=r+s.url;var c=s.needLogin;var u=s.isOperation||false;var d=s.needBdName||false;i[a]=function(e,i,o,r){return function(a,s,l,c,u,d){if(i){t(e,a,s,l,c,u,o,r,d)}else{n(e,a,s,l,c,null,o,r,d)}}}(l,c,u,d)}i.getMusicSuggestion=function(t,n,i,o,r){var a="http://nssug.baidu.com/su?wd="+encodeURIComponent(n.wd)+"&ie=utf-8&prod=ting";var s=r||a;var l=function(n){var o={};o.query=t;o.errorCode=22e3;if(typeof n==="string"){n=e.parseJSON(n)}if(n.s){o.data=n.s}else{o.data=n}i(o)};window.baidu=window.baidu||{};window.baidu.sug=l;e.ajax({url:s,dataType:"script",error:function(){var e={};e.query=t;e.errorCode=-1;e.errorMessage="请求失败";o(e)}})};ting.connect=i}(jQuery);var ting=ting||{};void function(){var e={};var t=function(){var e=window.location.href.replace(/^https?:\/\/.*?\//,"/").replace(/[?#].*$/,"");var t=[{reg:/^\/$/,page:"home"},{reg:/^\/top\/?$/,page:"c_top_i"},{reg:/^\/top\/[^\/]*\/?$/,page:"c_top_d"},{reg:/^\/artist\/?$/,page:"c_artist_i"},{reg:/^\/artist\/[^0-9]*$/,page:"c_artist_d"},{reg:/^\/album\/?$/,page:"c_album_i"},{reg:/^\/album\/[^0-9]*$/,page:"c_album_d"},{reg:/^\/tag\/?$/,page:"c_tag_i"},{reg:/^\/songlist\/?$/,page:"c_songlist_i"},{reg:/^\/songlist\/[0-9]*$/,page:"c_songlist_d"},{reg:/^\/search\/tag\/?$/,page:"c_tag_d"},{reg:/^\/tag\/*/,page:"m_tag"},{reg:/^\/king\/*/,page:"m_king"},{reg:/^\/topic\/?$/,page:"c_topic_i"},{reg:/^\/topic\/*$/,page:"c_topic_d"},{reg:/^\/artist\/[0-9]*\/?$/,page:"m_artist"},{reg:/^\/album\/[0-9]*\/?$/,page:"m_album"},{reg:/^\/song\/[0-9]*\/?$/,page:"m_song"},{reg:/^\/song\/[0-9]*\/download\/?$/,page:"m_down"},{reg:/^\/song\/batchdown\/?$/,page:"batchdown"},{reg:/^\/song\/[0-9]*\/lyric\/?$/,page:"m_lyric"},{reg:/^\/search\/?$/,page:"m_search_song"},{reg:/^\/search\/song\/?$/,page:"m_search_song"},{reg:/^\/search\/album\/?$/,page:"m_search_album"},{reg:/^\/search\/artist\/?$/,page:"m_search_artist"},{reg:/^\/search\/lrc\/?$/,page:"m_search_lyric"}];for(var n=0,i=t.length;n<i;n+=1){if(t[n].reg.test(e)){return t[n].page}}return"other"};var n=function(){if($.cookie){var e=$.cookie("t_sw");if(e){return e}}return null};e.getPage=function(){return t()};e.log=function(e,t){var n=Math.round(Math.random()*1e5)+(new Date).getTime();var i="http://nsclick.baidu.com/v.gif?pid=304&url=&v=1.0.0&r="+n;var o="&type="+encodeURIComponent(e);t.ref=t.ref||"music_web";if(ting.sample)t.sample=ting.sample;for(var r in t){o+="&"+encodeURIComponent(r)+"="+encodeURIComponent(t[r])}var a=i+o,s="ting_"+Math.round(Math.random()*1e5)+(new Date).getTime(),l=new Image;window[s]=l;l.onload=l.onerror=l.onabort=function(){l.onload=l.onerror=l.onabort=null;l=window[s]=null};l.src=a};e.logResolution=function(){var e=window.screen.width,t=window.screen.height;this.log("resolution",{sw:e,sh:t})};e.plogClick=function(i,o){var r,a="click",s=i,l=t(),c=n();r={pos:s,page:l,sid:o};if(c){r["t_sw"]=c}if(e.sub!==undefined){r.sub=e.sub}e.log(a,r)};e.setSub=function(t){e.sub=t};e.exposureAndAnchorClickLog=function(e,t){if(!ting||!ting.logger)return;for(var n=0,i=t.length;n<i;n+=1){var o=t[n]||{},r=o.root,a=o.logName,s=o.returnFalseSelector||[];if(!r||!r.length||!a)continue;ting.logger.log("exposure",{expoitem:a,page:e});r.find("a").click(function(t,n){return function(){var i=$(this);ting.logger.log("click",{pos:t,page:e});for(var o=0,r=n.length;o<r;o+=1){if(i.hasClass(n[o]))return false}return true}}(a,s))}};ting.logger=e}();var ting=ting||{};void function(){var e=window.location;var t={getSource:function(){var n="";var i="-1||-1";var o=window.location.search.split("&");var r=i.split("||")[0],a=i.split("||")[1],s=["fr","fm","from"];var l=/\w{0,}(\.\w{0,})+\.?/i;var c=document.referrer;if(!!c){var u=c.match(l)[0];a=u;if(c.indexOf("http://www.baidu.com/s")!=-1){r="bdsearch"}}if(!!o[0]){for(var d=0;d<o.length;d++){if(o[d].indexOf(s[0])!=-1||o[d].indexOf(s[1])!=-1||o[d].indexOf(s[2])!=-1){var f=o[d].split("=")[1];r=f.split("||")[0];a=f.split("||")[1]||u||a}}}if(!!c){if(c.indexOf(e.origin)!=-1){n=t.getCookie()||i}else{n=r+"||"+a}}else{n=r+"||"+a}return n},setCookie:function(){var e=t.getSource();jQuery.cookie("tracesrc",e,{path:"/",expires:1})},getFrom:function(){return t.getSource().split("||")[0]},getCookie:function(){return jQuery.cookie("tracesrc")},postLog:function(){var n=Math.round(Math.random()*1e5)+(new Date).getTime();var i="http://nsclick.baidu.com/v.gif?pid=304&url=&v=1.0.0&r="+n+"&type=tracesrc";var o="";var r=new Date,a=r.getFullYear(),s=r.getMonth()+1,l=r.getDate(),c=r.getHours(),u=r.getMinutes(),d=r.getSeconds(),f=c+":"+u+":"+d,p=[a,s,l,f];

var g={ref:e.host.indexOf("music.baidu.com")!=-1?"music_web":"tingbox",tracesrc:t.getSource(),inittime:p.join("-")};for(var h in g){o+="&"+encodeURIComponent(h)+"="+encodeURIComponent(g[h])}var m=i+o,v="ting_"+Math.round(Math.random()*1e5)+(new Date).getTime(),b=window[v]=new Image(1,1);b.onload=b.onerror=function(){window[v]=null};b.src=m;b=null}};ting.traceSource=t}();var CONFIG,Debugger,jQueryLoadModule,tools;CONFIG={DEBUG:false&&location.search.indexOf("AD")!==-1};if(CONFIG.DEBUG===true){CONFIG.bufferHeight=-30}tools={getAttribute:function(e){var t,n;n={};e=e.replace(/,\s*/g,",");t=/([\w]*)[\s]*=[\s]*([\w\/._,]*)/g;e.replace(t,function(e,t,i){return n[t]=i});return n},regJS:/<script([^>]*)>([\w\W]*?)<\/script>/g,filterJS:function(e){var t,n;t="";n=e.replace(this.regJS,function(e,n,i,o,r){t+=i;return""});return{remain:n,matched:t}},exec:function(e,t){return new Function(e).call(t)},_prepareHTML:function(e){var t,n;t=this.filterJS(e);return n={js:t.matched,dom:t.remain}},loadHtml:function(e,t){var n;n=this._prepareHTML(e);if(n.dom){if(n.dom.replace(/(^\s*)|(\s*$)/g,"").length>0){t.html(n.dom)}}if(n.js){return this.exec(n.js,t)}},debug:function(e){if(!CONFIG.DEBUG){return}Debugger.showInfo(e);e.css("padding","1px");return e.css("background","red")},loadAjaxData:function(){var e,t;e=this;t=e.data("url");if(!t){return}$.ajax({url:t,dataType:"json"}).done(function(t){e.html(t.data.html);e.removeClass("css-loading");return new Function(t.data.js).call(e)}).fail(function(){var n;e.html("<div class='async-module-error'><a href='#'>长时间没有响应，点击重新加载</a></div>");n=e.find(".async-module-error");n.css({position:"relative",top:e.height()/2+20,left:e.width()/2-90});return n.on("click",function(n){n.preventDefault();tools.loadAjaxData.call(e,t);return e.html("")})})}};Debugger={id:0,showInfo:function(e){var t,n,i,o,r;r=e.data("type");n=e.html();i=e.html().replace(/(^\s*)|(\s*$)/g,"").replace(/(<\!--)|(-->)/g,"");o=new Date;t=$("<div class='amd'>\n    <div class='title'>\n        ID: "+this.id+", TYPE: <span class='em'>"+r+"</span><span class='time'>"+(o.toTimeString().slice(0,9)+o.getMilliseconds())+"</span>\n    </div>\n    <div>\n        <span><button onclick='showSourceCode(this)'>原始HTML</button><textarea>"+n+"</textarea></span>\n        <span><button onclick='showSourceCode(this)'>解析出的代码</button><textarea>"+i+"</textarea></span>\n    </div>\n</div>");t.insertBefore(e);return this.id++},init:function(){if(!CONFIG.DEBUG){return}$("<style type='text/css'>\n  .amd {background: #CCE8CF}\n.amd .title{background: lightgreen}\n.amd .em {color: darkred; font-weight: bold}\n.amd textarea{display: none}\n.amd .time {float: right;}\n\n#amd-code {\n    position: fixed;\n    left: 0;\n    top: 0;\n    background: #CCE8CF;\n    width: 450px;\n    height: 100%;\n}\n  </style>").appendTo("head");return window.showSourceCode=function(e){if(!e.show){$("#amd-code").remove();e.show=true;return $("<textarea id='amd-code'>"+$(e).next().html()+"</textarea>").appendTo("body")}else{e.show=false;return $("#amd-code").remove()}}}()};jQueryLoadModule=function(){var e,t,n,i;try{i=this.data("type");switch(i){case"ajax":tools.debug(this);return tools.loadAjaxData.call($(this));default:t=this.html().replace(/(^\s*)|(\s*$)/g,"");if(t.indexOf("<!--")===-1){return}tools.debug(this);n=t.replace(/(<\!--)|(-->)/g,"");return tools.loadHtml(n,this)}}catch(o){e=o;if(CONFIG.debug){throw e}}};$.fn.loadModule=jQueryLoadModule;(function(){var e,t,n,i;i=$(".async-module");e=$(window);t=function(t){var o,r,a,s,l,c,u,d;if(t==null){t=0}r=0;s=e.scrollTop();c=e.height();for(o=u=0,d=i.length;u<d;o=u+=1){a=i.eq(o);if(a[0]!==void 0){l=a.offset().top;if(l<s+c+t&&s-a.height()<l){a.loadModule();delete i[o]}else{r++}}}if(r===0){e.off("scroll",n)}};n=function(){clearTimeout(arguments.callee.tid);return arguments.callee.tid=setTimeout(function(){return t(CONFIG.bufferHeight||e.height()/2)},50)};if(i.length>0){e.on("scroll",n);return t()}})();var ting=ting||{};void function(){try{var e=new singleInstance({bridge:"bridge",path:"/player/"})}catch(t){}var n={};n.openBox=function(){e.openBox.apply(e,arguments)};n.openPlayer=function(){e.openBox();s("open","")};var i=ting.traceSource.getSource();n.playSong=function(t,n){o(function(){var o=jQuery.isArray(t)?t.join("_"):t;if(!!n){n.fr=i}e.openBox("mboxCtrl.playSong",o,n||{});s("playSong",t)})};n.addSong=function(t,n){o(function(){var o=jQuery.isArray(t)?t.join("_"):t;if(!!n){n.fr=i}e.openBox("mboxCtrl.addSong",o,n||{});s("addSong",t)})};n.playAlbum=function(t,n){o(function(){if(!!n){n.fr=i}e.openBox("mboxCtrl.playAlbum",t,n||{});s("playAlbum",t)})};n.addAlbum=function(t,n){o(function(){if(!!n){n.fr=i}e.openBox("mboxCtrl.addAlbum",t,n||{});s("addAlbum",t)})};n.playTop=function(t,n){o(function(){if(!!n){n.fr=i}e.openBox("mboxCtrl.playTop",t,n||{});s("playTop",t)})};n.collectSong=function(t,n){n=n||{};n.fr=n.fr||i;o(function(){e.openBox("mboxCtrl.updateFavor",t,n);s("collectSong",t)})};n.collectPlaylist=function(t,n){n=n||{};n.fr=n.fr||i;o(function(){e.openBox("mboxCtrl.addFavorList",t,n);s("collectPlaylist",t)})};n.playArtist=function(t,n){n=n||{};n.fr=n.fr||i;o(function(){e.openBox("mboxCtrl.playArtist",t,n);s("playArtist",t)})};n.addArtist=function(t,n){n=n||{};n.fr=n.fr||i;o(function(){e.openBox("mboxCtrl.addArtist",t,n);s("addArtist",t)})};n.lyric=function(e){var t;if(e){if(/^\d+$/.test(e)){t="/song/"+e+"/lyric"}else{t="/song/0/lyric?title="+encodeURIComponent(e)}window.open(t,"lyric","height=600,width=500,status=no,toolbar=no,menubar=no,location=no")}};n.downloadSong=function(e,t,n,i){var o;var i=i||null,r=encodeURIComponent(window.location.pathname);if(n){if(i){o="/song/"+e+"/selldownload/"+"?resource="+i+"&__o="+r}else{o="/song/"+e+"/selldownload/"+"?__o="+r}window.open(o,"","height=400,width=870,status=no,toolbar=no,menubar=no,location=no")}else{if(e){if(/^\d+$/.test(e)){o="/song/"+e+"/download?__o="+r}else{o="/song/0/download?title="+encodeURIComponent(e)+"&__o="+r}if(t){o+="#rate="+t}window.open(o,"","height=535,width=970,status=no,toolbar=no,menubar=no,location=no")}}};n.downloadAll=function(e,t){var n="",i=encodeURIComponent(window.location.pathname);t=t||{};e=e.split?e.split(","):e;if(e.length==0){return false}else if(e.length>50){e=e.slice(0,50)}e=e.join(",");switch(t.type){case"album":n="&title="+encodeURIComponent(t.author+"-专辑《"+t.title+"》");break;case"songList":n="&title="+"歌单-《"+t.title+"》";break}var o="/song/batchdown?ids="+e+n+"&__o="+i;if(t.filter){o+="&filter="+t.filter}if(t.rate){o+="#rate="+t.rate}window.open(o,"","height=535,width=870,status=no,toolbar=no,menubar=no,location=no");return false};n.openFM=function(){fm.openBox()};n.playChannel=function(e,t){fm.openBox("setChannel",e+"_"+t)};function o(e){e()}var r={};r.isLogin=function(){return jQuery.cookie("u_lo")=="1"};r.setLogin=function(e){var t="0";var n="";var i="";if(e){if(e.active){t="1";n=e.userId;i=e.userType}else if(e.userName&&e.userName.length>0){t="2"}}jQuery.cookie("u_lo",t,{path:"/",expires:30});jQuery.cookie("u_id",n,{path:"/",expires:30});jQuery.cookie("u_t",i,{path:"/",expires:30})};r.getPlayCount=function(){var e=0;var t=jQuery.cookie("t_pcnt");if(t){var n=t.split("-")[0];var i=t.split("-")[1];var o=new Date;if(parseInt(n.substr(0,4),10)==o.getFullYear()&&parseInt(n.substr(4,2),10)==o.getMonth()+1&&parseInt(n.substr(6,2),10)==o.getDate()){e=parseInt(i)}else{r.setPlayCount(0)}}else{r.setPlayCount(0)}return e};r.setPlayCount=function(e){var t=new Date;var n=a(t.getFullYear(),4)+a(t.getMonth()+1,2)+a(t.getDate(),2);jQuery.cookie("t_pcnt",n+"-"+e,{path:"/",expires:30})};function a(e,t){var n=e.toString();while(n.length<t){n="0"+n}return n}n.userInfo=r;ting.media=n;function s(e,t){var n=jQuery.isArray(t)?t.join(","):t;ting.logger.log("siteToBox",{operation:e,id:n})}}();var ting=ting||{};void function(){var e={};e.cutStr=function(e,t,n,i){var o;i=i||12;t=Math.round(t*12/i);e=e||"";e=e.toString();if(e.length*12<=t){return e}var r=/[^\x00-\xff]/g;var a=e.replace(r,"W");var s=new Array(12,6,6,6,6,6,6,6,6,4,0,0,0,0,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,4,4,5,9,7,12,8,3,5,5,7,8,4,4,4,5,7,7,7,7,7,7,7,7,7,7,4,4,9,9,9,6,11,8,7,7,8,7,6,8,8,4,5,7,6,9,8,9,7,9,7,7,8,8,8,12,7,8,7,5,5,5,9,7,7,6,7,6,7,7,4,7,7,2,3,6,2,10,7,7,7,7,4,5,5,7,6,10,6,6,5,6,5,6,9,6);var l=0;var c=e.length;for(var u=0;u<e.length;u++){l+=Number(s[Number(a.charCodeAt(u))])||12;if(l>=t){c=u;break}}if(l>=t&&n==true){t-=12;for(var d=c-1;d>0;d--){l-=Number(s[Number(a.charCodeAt(d))])||12;if(l<=t){c=d+1;break}}o=e.substring(0,c)+"..."}else{o=e.substring(0,c)}return o};e.getP=function(e,t){t=t||12;var n=/[^\x00-\xff]/g;var i=e.replace(n,"W");var o=new Array(12,6,6,6,6,6,6,6,6,4,0,0,0,0,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,4,4,5,9,7,12,8,3,5,5,7,8,4,4,4,5,7,7,7,7,7,7,7,7,7,7,4,4,9,9,9,6,11,8,7,7,8,7,6,8,8,4,5,7,6,9,8,9,7,9,7,7,8,8,8,12,7,8,7,5,5,5,9,7,7,6,7,6,7,7,4,7,7,2,3,6,2,10,7,7,7,7,4,5,5,7,6,10,6,6,5,6,5,6,9,6);var r=0;for(var a=0;a<e.length;a++){r+=Number(o[Number(i.charCodeAt(a))])||12}return Math.round(r*t/12)};ting.cutString=e}();var ting=ting||{};void function(){var e=$(window),t=0,n=0,i=0,o=0;var r=null;var a=function(){var e="org_src",s="//mu7.bdstatic.com/static/images/music/loading.gif",l="//mu7.bdstatic.com/static/images/blank.gif",c={diff:0,placeholder:s},u=0,d={},f={"default":function(e){var r,a;if(e.ifcache!==false){r=e.position.top;a=e.position.left}else{var s=e.element.offset();r=s.top;a=s.left}var l=r-c.diff<=t+i;var u=t<=r+e.hw.height+c.diff;var d=a-c.diff<=n+o;var f=n<=a+e.hw.width+c.diff;if(l&&u&&d&&f){return true}else{return false}}},p={"default":function(t){var n=t.element.attr(e);t.element.attr("src",n)}};function g(e){return typeof e=="object"&&e&&e.constructor==String||typeof e=="string"}function h(e){var t=e.offset();return{top:t.top,left:t.left}}function m(e){return{height:e.height(),width:e.width()}}function v(e){return"item-"+e}function b(e){var t=e["checkfunc"];var n=e["renderfunc"];var i=e.content;for(var o=0;o<i.length;o++){var r=true;for(var a=0;a<t.length;a++){var s=t[a];if(!s(i[o])){r=false;break}}if(r){for(var l=0;l<n.length;l++){var s=n[l];s(i[o])}e.content.splice(o,1);o--}}}function y(e){var t=e["renderfunc"];var n=e.content;for(var i=0;i<n.length;i++){for(var o=0;o<t.length;o++){var r=t[o];r(n[i])}e.content.splice(i,1);i--}}return{add:function(e,t){function n(e,t,i){if($.isArray(e)){for(var o=0;o<e.length;o++){var r=e[o];n(r,t,i)}}else if($.isFunction(e)){t.push(e)}else if(g(e)&&!!i[e]){t.push(i[e])}}var i=[],o=[],r=[],s;if(e instanceof jQuery){s=e}else{s=$(e)}var l=s.length;if(l>0){for(var c=0;c<l;c++){var b=$(s[c]);var y={top:0,left:0};var w=true;var k=m(b);if(!t||t.ifcache!==false){y=h(b);w=true}else{w=false}i.push({element:b,position:y,ifcache:w,hw:k})}}else{return-1}if(!t||!t.checkfunc){o.push(f["default"])}if(!t||!t.renderfunc){r.push(p["default"])}if(!!t){n(t.checkfunc,o,f);n(t.renderfunc,r,p)}var x=v(++u);d[x]={content:i,checkfunc:o,renderfunc:r};a.check(u);return u},check:function(e){var t,n;function i(){r=null;for(var e in d){n=d[e];b(n)}}if(r!==null){return}else if(arguments.length>0){t=v(e);n=d[t];b(n)}else{r=setTimeout(i,50)}},load:function(e){var t,n;if(e){t=v(e);n=d[t];y(n)}else{for(var i in d){n=d[i];y(n)}}},remove:function(e){if(!e){d={};return true}else{var t=v(e);try{delete d[t]}catch(n){return false}return true}}}}();e.bind("scroll",function(){clearTimeout(arguments.callee.tid);arguments.callee.tid=setTimeout(function(){t=e.scrollTop();n=e.scrollLeft();a.check()},16)});e.bind("resize",function(){t=e.scrollTop();n=e.scrollLeft();i=e.height();o=e.width();a.check()});$(document).ready(function(){t=e.scrollTop();n=e.scrollLeft();i=e.height();o=e.width();a.check()});ting.LL=a;ting._loadChildImages=function(e){$("img",e).each(function(e,t){var n=$(t),i=n.attr("org_src");if(i){n.attr("src",i)}})};ting.loadChildImages=function(e,t){if(t){if(!t.init){ting._loadChildImages(e);t.init=true}}else{if(!e.attr("imgLoaded")){ting._loadChildImages(e);e.attr("imgLoaded",true)}}}}();(function(e,t){e.widget("ting.tip",{options:{errorCode:null,type:null,contentType:"text",msg:null,animateTime:500,showTime:1e3,button:null,iconClass:null,maxLength:null,btnConfirmText:"确定"},_create:function(){var e=this,t=e.options,n=e.element;e.widgetEventPrefix="tip.";e.uping=false;e.show=false},_init:function(){},drawLayer:function(){var t=this,n=t.options,i=t.element;var o,r,a,s,l,c,u=e("<div>").addClass("tipLayer").addClass(n.type);u=e('<div class="tipLayer">\r\n		            	<div class="m_m"></div>\r\n		            	<div class="tip-arrow"></div>\r\n		        	</div>').addClass(n.type);if(n.contentType!=null){o=o||e("<div>").addClass("content")}if(n.contentType=="text"){l=e("<div>").addClass("tip-head").html(n.msg);if(n.iconClass!=null){e("<span>").addClass("tip-icon").addClass(n.iconClass).prependTo(l)}l.appendTo(o)}else if(n.contentType=="textarea"){n.button=true;l=e("<div>").html(n.msg).appendTo(o);r=e("<textarea>").attr("rows","3").attr("cols","17").appendTo(o).one("focus",function(t){e(t.target).val("").css("color","#666")});t._textarea=r;t._head=l}else if(n.contentType=="html"){o.html(n.msg)}if(n.button){var d=n.btnConfirmText;a=e("<div>").addClass("btn-content");t._btnConfirm=s=e("<a>").attr("href","#").addClass("btn btn-a tip-button tip-btn-confirm").append("<span class='inner'>"+d+"</span>").appendTo(a);t._btnCancel=c=e("<a>").attr("href","#").addClass("btn btn-d tip-button tip-btn-cancel").append("<span class='inner'>取消</span>").appendTo(a);a&&a.appendTo(o)}o&&o.appendTo(e(".m_m",u));e(document.body).append(u);e(".tip-arrow",u).css({left:u.outerWidth()/2-5+"px"});u.appendTo(document.body).css({height:"-1000px",width:"-1000px"}).css("opacity","0.7").show();u.hide();u.attr("style","left:"+(i.offset().left-(u.outerWidth()-i.outerWidth())/2)+"px;"+"top:"+i.offset().top+"px");t.show=true;t.uping=true;t.$tip=u;t._trigger("showafter",null,t)},tipup:function(t){var n=this,i=n.options,o=n.element;if(n.show){return}if(typeof t==="string"){i.msg=t}else{e.extend(n.options,t)}if(n.show){return}this.drawLayer();if(i.button){n.preventHide=true}this._bindEvent();return false},hideForDocument:function(){if(!this.preventHide){this.tiphide(0)}},hide:function(){this.$tip.hide();this.show=false;this.destroy()},tiphide:function(e){var t=this,n=t.options,e=e||n.showTime,i=t.$tip;setTimeout(function(){if(!t.preventHide){i.animate({opacity:"hide",top:"-="+i.outerHeight()+"px"},n.animateTime,function(){t.show=false;t.destroy()})}},e)},_bindEvent:function(){var t=this,n=t.element,i=t.options,o=t.$tip;e(window).resize(function(){var t=n.offset().left+o.outerWidth()>e(window).width()?e(window).width()-o.outerWidth()-50:n.offset().left-(o.outerWidth()-n.outerWidth())/2;o.attr("style","left:"+t+"px;"+"top:"+(n.offset().top-o.outerHeight()-5)+"px").show()});o.animate({opacity:"show",top:"-="+(o.outerHeight()+10)+"px"},i.animateTime,function(){t._textarea&&t._textarea.focus();o.hover(function(){t.preventHide=true},function(){t.preventHide=false;if(!i.button){t.tiphide()}});t.uping=false;e(document).bind("click",e.proxy(t.hideForDocument,t));if(i.button){if(t._btnConfirm){t._btnConfirm.bind("click",function(e){if(i.maxLength&&!t.textareaCheck()){return false}if(false!==t._trigger("confirm",e,t)){t.preventHide=false;t.options.showTime=0;if(t._textarea){t.hide()}else{t.tiphide()}}return false})}if(t._btnCancel){t._btnCancel.bind("click",function(e){if(false!==t._trigger("cancel",e,t)){t.preventHide=false;i.showTime=0;t.tiphide()}return false})}t.preventHide=false}else{t.tiphide()}});if(i.maxLength){t._textarea.bind("propertychange input",function(e){t.textareaCheck()})}},textareaCheck:function(){var t=this,n=t.options,i=t.$tip;if(e.ting.byteLength(t._textarea.val())>n.maxLength){t._head.addClass("ci");return false}else{t._head.removeClass("ci");return true}return true},destroy:function(){var t=this,n=t.options;var i=t.$tip;if(!i){return}t._trigger("hideafter",t);i.unbind();if(e(".tipLayer",document).length==1){e(document).unbind("click",this.hideForDocument)}i.remove();t.preventHide=false}});e(function(){e(".collection-hook").tip();e(".recommend-hook").tip({msg:"请填写50个字以内的推荐语吧。。。",maxLength:100,button:true,contentType:"textarea"}).bind("tip.confirm",function(t,n){var i=this,o=e.metadata.get(this),r="recommend";if(o.type=="topic"){r="recommendtopic"}o.description=n._textarea.val();ting.connect[r](null,o,function(t){e(i).tip({contentType:"text",showTime:1e3,button:null}).tip("tipup",{msg:"推荐成功！",iconClass:"tip-success"})},function(t){e(i).tip({contentType:"text",showTime:1e3,button:null}).tip("tipup",{msg:t.errorMessage||"推荐失败",iconClass:"tip-error"})})}).bind("tip.cancel",function(e,t){if(t._textarea.val()){t._textarea.val("");t.textareaCheck();return false}else{return true}})})})(jQuery);void function(e,t){e.widget("ting.songItem",{options:{checkItemHook:".checkbox-item-hook",deleteHook:".song-delete-hook",highRateHook:".high-rate-icon",losslessHook:".icon-lossless",index:".index-hook",disabledClass:"btn-disabled",sid:null,sname:null,author:null},_create:function(){var e=this,t=e.element,n=e.options;e.widgetEventPrefix="songitem.";e.$check=t.find(n.checkItemHook);e.$deleteBtn=t.find(n.deleteHook);e.$highRate=t.find(n.highRateHook);e.$lossLess=t.find(n.losslessHook);e.$index=t.find(n.index)},_init:function(){var t=this,n=t.element,i=t.options;t.checkStatus();t.$check.bind("click",function(){t._trigger("clickcheckitem",null,{checked:t.$check.attr("checked")});t.checkStatus("check",e(this))});t.$highRate.bind("click",function(){var t=e(this).parents("li").data("songitem").songItem.sid;ting.media.downloadSong(t);return false});t.$lossLess.on("click",function(){var t=e(this).parents("li").data("songitem").songItem.sid;ting.media.downloadSong(t,1e3);return false});t.$deleteBtn.css("visibility","visible").tip({msg:"你确定要取消收藏？",button:true}).click(function(){e(this).tip("tipup");return false}).bind("tip.confirm",function(){var n=this;ting.connect.deleteCollection(null,{ids:i.sid,type:"song"},function(){if(t._trigger("beforedelete",null,{id:i.sid})){this.deleteItem()}ting.media.collectSong(i.sid,{cancel:true})},function(t){e(n).tip("tipup",{msg:t.errorMessage||"取消失败！",iconClass:"tip-error"})})})},checkStatus:function(t,n){var i=this,o=i.element,r=i.options;var a=e(".play-selected-hook",o.parents("div.song-list")),s=e(".add-selected-hook",o.parents("div.song-list")),l=e(".collect-selected-hook",o.parents("div.song-list")),c=e(".down-selected-hook",o.parents("div.song-list")),u=e(r.checkItemHook,o.parent()),d=o.parent();checkTotal=0;if(t!="check"){u.each(function(){if(e(this).attr("checked")){checkTotal++}});d.attr("select",checkTotal)}else{curTotal=parseInt(d.attr("select"));if(n.attr("checked")){d.attr("select",curTotal+1)}else{d.attr("select",curTotal-1)}}if(d.attr("select")==0){a&&a.button("disable").addClass(r.disabledClass);s&&s.button("disable").addClass(r.disabledClass);l&&l.button("disable").addClass(r.disabledClass);c&&c.button("disable").addClass(r.disabledClass)}else{a&&a.button("active").removeClass(r.disabledClass);s&&s.button("active").removeClass(r.disabledClass);l&&l.button("active").removeClass(r.disabledClass);c&&c.button("active").removeClass(r.disabledClass)}},select:function(e){if(t===e){return this.$check.attr("checked")?true:false}else{this.$check.attr("checked",e)}},getSid:function(){var e=this.element.data("songitem")?this.element.data("songitem").songItem.sid:"";return e?e:this.options.sid||this.options.sid},getFilterSid:function(){var e=this.element.data("songitem")?this.element.data("songitem").songItem.sid:this.options.sid;if(parseInt(this.element.data("songitem").yyr_song_id,10)){return null}return e},getFilterKrSid:function(){var e=this.element.data("songitem")?this.element.data("songitem").songItem.sid:this.options.sid;if(parseInt(this.element.data("songitem").songItem.pay_type)==1||parseInt(this.element.data("songitem").songItem.pay_type)==3){return null}if(parseInt(this.element.data("songitem").yyr_song_id,10)){return null}return e},getSname:function(){var e=this.element.data("songitem")?this.element.data("songitem").songItem.sname:"";return e?e:this.options.sname||this.options.sname},getAuthor:function(){var e=this.element.data("songitem")?this.element.data("songitem").songItem.author:"";return e?e:this.options.author||this.options.author},setIndex:function(e){var t=e+1;var n=t<10?"0"+t:t;this.$index.text(n)},deleteItem:function(){var e=this.element;e.animate({height:"hide",opacity:"hide",paddingTop:"0px",paddingBottom:"0px"},"slow",function(){e.remove()})}})}(jQuery);void function(e,t){e.widget("ting.songList",{options:{selectAllHook:".select-all-hook",addHook:".add-selected-hook",playHook:".play-selected-hook",collectHook:".collect-selected-hook",fold:".master-song",downallHook:".down-selected-hook",item:".song-item-hook",item1:".csong-item-hook",checkbox:".checkbox-item-hook",disabledClass:"btn-disabled",delSong:false,start:0,type:"song-list",data:{},rate:null},_create:function(){var t=this,n=t.element,i=t.options;t.widgetEventPrefix="songlist.";t.$selectAll=n.find(i.selectAllHook);t.$add=n.find(i.addHook).button();t.$play=n.find(i.playHook).button();t.$collect=n.find(i.collectHook).button();t.$downall=n.find(i.downallHook).button();t.$fold=n.find(i.fold);t.itemArr={};t.items=[];n.find(i.item1).each(function(n,i){var o=e(i).songItem();t.items.push(o);t.itemArr[o.songItem("getSid")]=o});t.$titleLink=n.find(".song-title").find("a");t.$artistLink=n.find(".singer").find("a");t.$albumLink=n.find(".album-title").find("a")},_init:function(){var e=this,t=e.options;e._initEvent()},selectAll:function(t){var n=this,i=n.element,o=n.options;e(o.checkbox,i).attr("checked",t);if(!t){i.find("ul").attr("select",0);n.$play&&n.$play.button("disable").addClass(o.disabledClass);n.$add&&n.$add.button("disable").addClass(o.disabledClass);n.$collect&&n.$collect.button("disable").addClass(o.disabledClass);n.$downall&&n.$downall.button("disable").addClass(o.disabledClass)}else{i.find("ul").attr("select",i.find(o.item1).length);n.$play&&n.$play.button("active").removeClass(o.disabledClass);n.$add&&n.$add.button("active").removeClass(o.disabledClass);n.$collect&&n.$collect.button("active").removeClass(o.disabledClass);n.$downall&&n.$downall.button("active").removeClass(o.disabledClass)}},getSelectedIDs:function(e){var t=[];var n=this.items;var i=this;i.playSids=[];i.playFeeSids=[];i.downSids=[];i.downFeeSids=[];for(var o=0;o<n.length;o++){if(n[o].songItem("select")){var r=n[o].songItem("getSid");var a=n[o].find(".music-icon-hook");var s=false;var l=false;if(a){var c=a.data("musicicon");if(c){s=c.playFee;l=c.downFee}}if(s&&BDUS&&BDUS.vipState!="gold"){i.playFeeSids.push(r)}else{if(e==="num"&&isNaN(r)){continue}else{i.playSids.push(r)}}if(l&&BDUS&&BDUS.vipState!="gold"){i.downFeeSids.push(r)}else{if(e==="num"&&isNaN(r)){continue}else{i.downSids.push(r)}}}}return i.playSids},getFilterIDs:function(){var e=[];var t=this.items;for(var n=0;n<t.length;n++){if(t[n].songItem("select")){var i=t[n].songItem("getFilterSid");var o=t[n].find(".music-icon-hook");var r=false;if(o){var a=o.data("musicicon");if(a){r=a.downFee}}if(i&&!(r&&BDUS&&BDUS.vipState!="gold")){e.push(i)}}}return e},getFilterKrIDs:function(){var e=[];var t=this.items;for(var n=0;n<t.length;n++){if(t[n].songItem("select")){var i=t[n].songItem("getFilterKrSid");var o=t[n].find(".music-icon-hook");var r=false;if(o){var a=o.data("musicicon");if(a){r=a.downFee}}if(i&&!(r&&BDUS&&BDUS.vipState!="gold")){e.push(i)}}}return e},getKrIDs:function(){var e=[],t=this.items;for(var n=0;n<t.length;n++){if(t[n].songItem("select")){var i=t[n].data("songitem").songItem;var o=i.sid;var r=t[n].find(".music-icon-hook");var a=false;if(r){var s=r.data("musicicon");if(s){a=s.downFee}}if(i.pay_type==1&&!(a&&BDUS&&BDUS.vipState!="gold")){e.push(o)}}}return e},playSelected:function(){var t=this.getSelectedIDs();var n=this,i=n.element,o={moduleName:!!i.data("listdata")?i.data("listdata").moduleName:"",searchValue:!!i.data("listdata")?i.data("listdata").searchValue:""};if(n.playSids.length>0&&n.playFeeSids.length>0){o.filterFee=1}if(t.length>0){ting.media.playSong(t,o);if(ting&&ting.logger&&ting.logger.plogClick){ting.logger.plogClick("play_sel")}}else{if(t.length<=0&&this.playFeeSids.length>0){return}else{e.ting.popup.messageFailed("请选择您要播放的歌曲！")}}},addSelected:function(){var t=this.getSelectedIDs();var n=this,i=n.element,o={moduleName:!!i.data("listdata")?i.data("listdata").moduleName:"",searchValue:!!i.data("listdata")?i.data("listdata").searchValue:""};if(t.length>0){ting.media.addSong(t,o);if(ting&&ting.logger&&ting.logger.plogClick){ting.logger.plogClick("add_sel")}return 1}else{if(t.length<=0&&this.playFeeSids.length>=0){return}else{e.ting.popup.messageFailed("请选择您要添加的歌曲！")}}},collectSelected:function(){var t=this.getFilterIDs().join(","),n=this;if(t.length>0){ting.connect.collect(null,{ids:t,type:"song"},function(e){var i=e.data;i.ids=t;n._trigger("collectdone",null,i);ting.media.collectSong(t.replace(/,/g,"_"))},function(e){n._trigger("collectfailed",null,{ids:t,errorCode:e.errorCode,errTip:ting.errorMap[e.errorCode]})})}else{e.ting.popup.messageFailed("请选择您要保存的歌曲！");return}},cancelcollectSelected:function(){var e=this;var t=e.getSelectedIDs().join(",");ting.connect.deleteCollection(null,{ids:t,type:"song"},function(n){if(e.options.delSong){e._trigger("canceldone",null,{ids:t});ting.media.collectSong(t.replace(/,/g,"_"),{cancel:true})}},null)},removeById:function(t){var n=this;var i=n.items;var o=parseInt(n.options.start);o=o==NaN?0:o;var r=n.itemArr[t];for(var a=0;a<i.length;a++){if(i[a]==r){r.songItem("deleteItem");i.splice(a,1);delete n.itemArr[t];a--}}e(i).each(function(t,n){var r=o+t;e(n).songItem("setIndex",r);if(t==i.length-1){e(n).addClass("last-item")}})},getSelectDownData:function(){var e=this.items,t=[];for(var n=0;n<e.length;n++){if(e[n].songItem("select")){var i=e[n].songItem("getSname"),o=e[n].songItem("getAuthor");t.push({artist:o,title:i})}}return t},showDialg:function(t){var t=t||{};var n=e(t.content);n.dialog({className:"dialog-message",showBtn:true,confirm:{btn:"",close:true,callback:function(){},text:"知道了"},cancel:false,title:"&nbsp;",width:360,destroy:true,showBg:true}).dialog("show")},changeBatchDownStatus:function(){var t=this,n=t.options;$me=t.element;if(!ting.userInfo&&t.$downall.length){e.getJSON("/data/user/info?callback=?",function(e){if(e.data.batchDown==1){t.$downall.show()}})}},downloadAll:function(e){var t=this;var e=e||{};t.getSelectedIDs();var n=t.getFilterKrIDs().length,i=t.getKrIDs();if(i.length>0){e.filter=1}if(n>1){if(i.length>0&&t.getFilterKrIDs().length==0){t.showDialg({content:"<p>你选中的歌曲部分需要进行付费，暂时不支持批量操作。<br/>你可以对单曲进行付费下载。</p>"})}else{ting.media.downloadAll(t.getFilterKrIDs(),e)}}else{if(n==1){ting.media.downloadSong(t.getFilterKrIDs(),e.rate)}}},_initEvent:function(){var t=this,n=t.options;$me=t.element;var i;t.$titleLink.bind("click",function(t){var n=e(this).data("provider");var i={page:"pcweb_music",pos:"skip_button",sub:"cooperate_"+n};ting.logger.log("click",i)});t.$artistLink.bind("click",function(t){var n=e(this).data("provider");var i={page:"pcweb_music",pos:"skip_button",sub:"cooperate_"+n};ting.logger.log("click",i)});t.$albumLink.bind("click",function(t){var n=e(this).data("provider");var i={page:"pcweb_music",pos:"skip_button",sub:"cooperate_"+n};ting.logger.log("click",i)});t.$selectAll.bind("click",function(){var n=e(this).attr("checked")?true:false;t.$selectAll.attr("checked",n);t.selectAll(n)});t.$play.bind("button.click",function(){if(!e(this).hasClass(n.disabledClass)){t.playSelected();var i={msg:"已开始播放",iconClass:"tip-success"};if(t.playSids.length){if(t.playFeeSids.length){i.msg="已自动过滤付费歌曲"}e(this).tip().tip("tipup",i)}else{if(t.playFeeSids.length){ting.showTip({$tar:e(this),type:"needgoldvip",cancelEvent:"blur",reason:"pay_listen"})}}return false}});t.$add.bind("button.click",function(){if(!e(this).hasClass(n.disabledClass)){e(this).tip();t.addSelected();var i={msg:"添加成功！",iconClass:"tip-success"};if(t.playSids.length){if(t.playFeeSids.length){i.msg="已自动过滤付费歌曲"}e(this).tip().tip("tipup",i)}else{if(t.playFeeSids.length){ting.showTip({$tar:e(this),type:"needgoldvip",cancelEvent:"blur",reason:"pay_listen"})}}return false}});t.$fold.bind("click",function(){var n=e(this),i,o=n.parents(".song-item-hook"),r=!n.data("notsearch"),a;if(n.hasClass("fold-down")){n.removeClass("fold-down").addClass("fold-up");i=n.data("song");n.attr("title","收起");if(n.hasClass("loaded")){a=o.next(".group-songlist").show();a.addClass("group-fold-bg")}else{ting.connect[r?"getGroupSong":"getClusterSong"](i,null,function(i){var r=i.data;a=e(r.html);if(t.items.length==1){a.addClass("group-parent-nocheckbox")}o.after(a);e(".music-icon-hook",a).musicIcon();e(".icon-lossless",a).bind("click",function(){var t=e(this).parents("li").data("songitem").songItem.sid;ting.media.downloadSong(t,1e3);return false});e("a.thirdparty,a.noPage",a).bind("click",function(){var t=e(this).data("songdata");ting.media.playSong(t.id);return false});a.addClass("group-fold-bg");n.addClass("loaded")})}o.addClass("group-fold-bg")}else{n.attr("title","查看更多版本");n.removeClass("fold-up").addClass("fold-down");o.removeClass("group-fold-bg");o.next(".group-songlist").hide().removeClass("group-fold-bg")}return false});t.$collect.bind("button.click",function(){if(!e(this).hasClass(n.disabledClass)){i=this;t.collectSelected();return false}}).tip();t.$downall.bind("button.mousedown",function(){var e=t.getSelectedIDs().length;ting.logger.log("down_mutli",{page:ting.logger.getPage(),song_num:e})});t.$downall.bind("button.click",function(){var n={};if(t.options.rate){n.rate=t.options.rate}var i={msg:"请转到新打开的下载页下载",iconClass:"tip-success"};if(t.downSids.length&&t.downFeeSids.length){i.msg="已自动过滤付费歌曲";e(this).tip().tip("tipup",i)}else{if(t.downFeeSids.length){ting.showTip({$tar:e(this),type:"needgoldvip",cancelEvent:"blur",reason:"pay_down"})}}t.downloadAll(n);return false});this.element.bind("songlist.collectdone",function(n,o){if(o.illegal&&o.illegal==1){t.showDialg({content:"<p>你选中的歌曲部分需要进行付费，暂时不支持批量操作。<br/>你可以对单曲进行付费收藏到云</p>"})}else{e(i).tip("tipup",{msg:"已保存到我的收藏",iconClass:"tip-success"})}}).bind("songlist.collectfailed",function(t,n){var o="tip-error";switch(n.errorCode){case 22322:o="tip-warning";n.errTip="歌曲已被保存";break;case 22331:n.errTip='云空间已满，去<a target="_blank" href="http://yinyueyun.baidu.com/" >整理云空间</a>吧！';break;case 22232:n.errTip="对不起，百度音乐只能在中国内地提供服务";break;default:n.errTip="操作失败，请稍候再试";break}var r={msg:n.errTip?n.errTip:"操作失败",iconClass:o};if(n.errorCode=22331){r.showTime=5e3}e(i).tip("tipup",r)}).bind("songlist.canceldone",function(e,n){var i=n.ids.split(",");for(var o=0;o<i.length;o++){t.removeById(i[o])}});e(t.items).each(function(n,i){e(i).bind("songitem.beforedelete",function(e,n){t.removeById(n.id);return false}).bind("songitem.clickcheckitem",function(e,n){var i=true;for(var o in t.itemArr){if(!t.itemArr[o].songItem("select")){i=false}}t.$selectAll.attr("checked",i)})});$me.find("a.thirdparty,a.noPage").bind("click",function(){var t=e(this).data("songdata");if(t&&t.id){ting.media.playSong(t.id);e(this).tip().tip("tipup",{msg:"已开始播放",iconClass:"tip-success"})}return false})},floatBar:function(){var t=e(this.element),n=e(window),i=t.find(".top-btn"),o=t.find(".btm-btn");if(!t||!i||!i.length)return;var r=i.offset().top,a=o.offset().top,s=i.parent().offset().top,l=e.browser.msie&&parseFloat(e.browser.version)<7,c=8,u=false,d="float-bar",f="float-bar-placeholder",p=null,g=300,h=null,m=function(){return n.height()},v=function(){return n.scrollTop()},b=function(){return v()-s},y=function(){if(!p){p=e("<div class='"+f+"'></div>");p.insertAfter(i)}return p.show()},w=function(){p&&p.hide()},k=function(){return v()+c>r&&v()+m()<a},x=function(e){i[e?"addClass":"removeClass"](d);!e&&i.css("top",0)},_=function(){i.css("top",(l?b():0)+"px")},C=function(){y();x(true)},S=function(){w();x(false)},$=function(){h&&clearInterval(h);h=setInterval(function(){_()},g)},I=function(){var e=k();if(!u&&e){u=true;C();_();$()}else if(u&&!e){
u=false;S()}if(h&&!e){clearInterval(h)}};if(!i.length||!o.length||l)return;n.bind("scroll resize",I);I()}})}(jQuery);(function(e){e.widget("ui.sendByClient",{options:{rate:128},_defaultData:{data_type:"music",data_package:"",data_versionname:"",data_from:"1001490z",ext_type:"apk",ext_url:"http://music.baidu.com/cms/mobile/static/apk/BaiduMusic_pcbdshoujizhushou.apk",ext_name:"百度音乐",ext_package:"com.ting.mp3.android",ext_versionname:"3.8.1",ext_icon:"http://hiphotos.baidu.com/wisegame/pic/item/2410b912c8fcc3ce99f9f1709345d688d43f20b3.jpg",ext_size:"6828251"},_create:function(){},down:function(){var t=this,n=this.element;ting.connect.getSong({song_id:this.options.songId,rate:this.options.rate},null,function(i){i=i.data.songList[0];var o={data_url:i.songLink,data_name:i.songName,data_icon:i.songPicSmall,data_size:i.size};e.extend(o,t._defaultData);e.each(o,function(e,t){n.attr(e,t)});bd_app_dl(n[0])})}})})(jQuery);(function(e,t){var n={add:"icon-add",collect:"icon-collect",download:"icon-download",play:"icon-play",playlist:"icon-playlist",recommend:"icon-recommend",songword:"icon-songword",subscribe:"icon-subscribe",send:"icon-send",jump:"icon-jump",needvip:"icon-needvip"};function i(e){var t=document.createElement("div");t.innerHTML=e;try{return t.childNodes[0].nodeValue}catch(n){return e}}function o(e,t){ting.showTip({$tar:e,type:"needgoldvip",cancelEvent:"blur",reason:t})}e.widget("ting.musicIcon",{options:{songId:null,hasTip:true,songName:null},_create:function(){var t=this,i=t.element,o=t.options,r=i.data("musicicon")?i.data("musicicon"):"",a=(i.data("musicicon")?i.data("musicicon").iconStr:o.iconStr)||"",s=a.replace(/^\s+/,""),l=s.split(" "),c,u,d;if(l.length<=1){for(d in n){l.push(d)}}t.icons={};for(var f=0,p=l.length;f<p;f+=1){u=l[f];if(u=="play"&&r.is_jump){u="jump"}if(u=="play"&&r.playFee){u="needvip"}c=n[u];if(c){t.icons["$"+u]=e("."+c,t.element)}}t._initEvent()},log:function(e){var t=window.location.pathname.split("/"),n=t[2]=="collection"?"select":t[1]||"home";ting.logger.log("singleDown",{source:n,sid:e})},_initEvent:function(){var t=this,n=t.element,r=t.icons;var a=n.data("musicicon")?n.data("musicicon"):"",s={moduleName:a.moduleName||"",searchValue:a.searchValue||""};if(r.$play){r.$play.bind("click",function(n){var o=a.type||t.options.type,l="playSong";switch(o){case"song":l="playSong";break;case"album":l="playAlbum";break;case"diy":l="playDiy";break;case"artist":l="playArtist";break}ting.media[l](i(a.id||t.options.id),s);if(t.options.hasTip){if(o=="song"&&(a.kr_top=="1"||a.kr_top=="2")){var c=e("#krPlayTip");if(!c.length){c=e("<div>",{id:"krPlayTip","class":"kr-play-tip",html:'<span class="tip-arrow"></span><a target="_blank" href="/king/top">King榜</a>打榜歌曲，<a target="_blank" href="/king/legal#listen-rule">有效试听</a>可提升排名'}).appendTo("body");e(document).bind("mousedown",function(t){if(e.contains(e("#krPlayTip")[0],t.target)){return false}e("#krPlayTip").hide()})}c.attr("style","left:"+(r.$play.offset().left-(c.outerWidth()-r.$play.outerWidth())/2)+"px;"+"top:"+(r.$play.offset().top+r.$play.outerHeight()+8)+"px");c.show()}else{e(this).tip().tip("tipup",{msg:"已开始播放",iconClass:"tip-success"})}}if(ting&&ting.logger&&ting.logger.plogClick){ting.logger.plogClick("play_"+o)}if(ting.browser.isSpecial()){ting.browser.add2box("play")}return false})}if(r.$needvip){r.$needvip.bind("click",function(n){var r=e(this);if(BDUS&&BDUS.vipState!="gold"){o(r,"pay_listen")}else{var l=a.type||t.options.type;var c="playSong";switch(l){case"song":c="playSong";break;case"album":c="playAlbum";break;case"diy":c="playDiy";break;case"artist":c="playArtist";break}ting.media[c](i(a.id||t.options.id),s)}})}if(r.$recommend){r.$recommend.bind("tip.confirm",function(e,n){var i=a||t.options;i.description=n._textarea.val();ting.connect.recommend(null,i,function(e){r.$recommend.tip({contentType:"text",showTime:1e3,button:null}).tip("tipup",{msg:"推荐成功",iconClass:"tip-success"})},function(e){r.$recommend.tip({contentType:"text",showTime:1e3,button:null}).tip("tipup",{msg:e.errorMessage||"推荐失败",iconClass:"tip-error"})})}).bind("tip.cancel",function(e,t){if(t._textarea.val()){t._textarea.val("");t.textareaCheck();return false}else{return true}});r.$recommend.bind("click",function(e){ting.passport.checkLogin(function(){},function(){},function(){},function(){},{ref:"pop_web",operation:true});return false})}if(r.$collect){r.$collect.tip();var l={page:ting.logger.getPage(),pos:"collect_song",songcount:1};r.$collect.bind("click",function(i){var o=Number(n.data("musicicon").yyr_song_id),s=Number(n.data("musicicon").id);if(o){if(!ting.userInfo){ting.passport.checkLogin(function(){});return false}e.ajax({url:"http://y.baidu.com/data/song/favorite/add",type:"POST",dataType:"jsonp",data:{songId:s,from:"play"}}).done(function(t){if(t.errorCode!=22e3){if(t.errorCode==22322){e(r.$collect).tip("tipup",{msg:"歌曲已被保存",iconClass:"tip-error"});return false}var n=e('<div style="text-align: left;">您需要访问 <a target="_blank" href="http://y.baidu.com">百度音乐人</a>平台，完成音乐收藏。</div>');n.dialog({className:"dialog-message",showBtn:true,confirm:{btn:"",close:true,callback:function(){window.open("http://y.baidu.com/song/"+o+"?buy="+o)},text:"立即去收藏"},cancel:false,destroy:true,title:"&nbsp;",width:360,showBg:true}).dialog("show")}else{e(r.$collect).tip("tipup",{msg:"已保存到我的收藏",iconClass:"tip-success"})}});return false}if(a.pay_type&&a.pay_type==="1"){var s=a.id,c=encodeURIComponent(window.location.pathname);if(/^\d+$/.test(s)){link="/song/"+s+"/collect?resource=kingfav&__o="+c}window.open(link,"","height=435,width=785,status=no,toolbar=no,menubar=no,location=no");ting.logger.plogClick("fav_music",s);return false}ting.connect.collect(null,{ids:a.id||t.options.id,type:a.type||t.options.type},function(t){e(r.$collect).tip("tipup",{msg:"已保存到我的收藏",iconClass:"tip-success"});if(ting&&ting.logger){l.state=1;ting.logger.log("collect",l)}if(ting.browser.isSpecial()){ting.browser.add2box("collect")}ting.media.collectSong(a.id)},function(t){var n="tip-error";switch(t.errorCode){case 22322:n="tip-warning";t.errTip="歌曲已被保存";break;case 22331:t.errTip="云空间已满，去<a href ='http://yinyueyun.baidu.com/' target = '_blank'>整理云空间</a>吧！";break;case 22232:t.errTip="对不起，百度音乐只能在中国内地提供服务";break;default:t.errTip="操作失败，请稍候再试";break}var i={msg:t.errTip?t.errTip:"操作失败",iconClass:n};if(t.errorCode=22331){i.showTime=5e3}if(ting&&ting.logger){l.state=t.errorCode;ting.logger.log("collect",l)}e(r.$collect).tip("tipup",i)});return false})}if(r.$subscribe){r.$subscribe.tip();r.$subscribe.bind("click",function(n){ting.connect.collect(null,{ids:a.id||t.options.id,type:a.type||t.options.type},function(t){e(r.$subscribe).tip("tipup",{msg:"已收录",iconClass:"tip-success"});ting.media.collectSong(a.id)},function(t){if(t.errorCode=="22322"){e(r.$subscribe).tip("tipup",{msg:"该自选辑已被收录",iconClass:"tip-error"})}else{e(r.$subscribe).tip("tipup",{msg:t.errorMessage||"收录失败",iconClass:"tip-error"})}});return false})}if(r.$add){r.$add.bind("click",function(n){var o=a.type||t.options.type,r="playSong";switch(o){case"song":r="addSong";break;case"album":r="addAlbum";break;case"diy":r="addDiy";break;case"artist":r="addArtist";break}ting.logger.log("siteToBox",{operation:"click_add_icon"});ting.media[r](i(a.id||t.options.id),s);if(ting&&ting.logger&&ting.logger.plogClick){ting.logger.plogClick("add_"+o)}if(t.options.hasTip){e(this).tip().tip("tipup",{msg:"添加成功！",iconClass:"tip-success"})}if(ting.browser.isSpecial()){ting.browser.add2box("play")}return false})}if(r.$download){r.$download.bind("click",function(i){var o=Number(n.data("musicicon").yyr_song_id);if(o){if(!ting.userInfo){ting.passport.checkLogin(function(){});return false}var r=e('<div style="text-align: left;">您需要访问 <a target="_blank" href="http://y.baidu.com">百度音乐人</a>平台，获取音乐下载。</div>');r.dialog({className:"dialog-message",showBtn:true,confirm:{btn:"",close:true,callback:function(){window.open("http://y.baidu.com/song/"+o+"?buy="+o)},text:"立即去下载"},cancel:false,destroy:true,title:"&nbsp;",width:360,showBg:true}).dialog("show");return false}if(parseInt(a.pay_type,10)!=3){ting.media.downloadSong(a.id||t.options.id)}else{ting.media.downloadSong(a.id||t.options.id,"",true)}t.log(a.id||t.options.id);if(ting&&ting.logger&&ting.logger.plogClick){ting.logger.plogClick("down_song")}return false})}if(r.$songword){r.$songword.bind("click",function(e){ting.media.lyric(a.id||t.options.id);return false})}if(r.$jump){r.$jump.bind("click",function(t){var n=e(this).data("provider");var i={page:"pcweb_music",pos:"skip_button",sub:"cooperate_"+n};ting.logger.log("click",i)})}if(r.$send){require(["http://m.baidu.com/static/as/res2exe/js/res2exe_1.0.4.min.js"],function(){r.$send.sendByClient({songId:a.id||t.options.id}).on("click",function(e){e.preventDefault();r.$send.sendByClient("down");ting.logger.log("click",{page:ting.logger.getPage(),pos:"to_app",songid:a.id})})})}}});e(function(){e(".music-icon-hook").musicIcon()})})(jQuery);(function(e,t){var n={up:"up",active:"active",over:"over",down:"down",disable:"disabled"};e.widget("ting.button",{options:{state:"up",data:null},_create:function(){this.widgetEventPrefix="button."},_init:function(){var e=this;this._state=this.options.state;this.element.bind("mousedown",function(t){if(e.state()!=n.disable){return e._trigger("mousedown",t,null)}else{return false}});this.element.bind("click",function(t){if(e.state()!=n.disable){return e._trigger("click",t,null)}else{return false}})},data:function(e){if(t===e){return this.options.data}else{this.options.data=e}},state:function(e){if(this.element.hasClass(n.disable)){this._state=n.disable}if(t!=e){e=n[e]||n.up;this.element.removeClass(this._state).addClass(e);this._state=e}else{return this._state}},enable:function(){this.state("up")},disable:function(){this.state("disable")},active:function(){this.state("active")}})})(jQuery);(function(e,t){var n=e.browser.msie&&e.browser.version=="6.0";e.widget("ting.dialog",{options:{autoOpen:false,width:620,opacity:.5,close:{btn:".close",callback:function(){}},destroy:false,confirm:{btn:"",close:true,callback:function(){},text:"确认"},cancel:{btn:"",close:true,callback:function(){},text:"取消"},bgiframe:false,fadeSpeed:250,title:null,className:"",showBtn:false,showBg:true,stick:false},_create:function(){var t=this.options,n=this.element;if(t.title){if(t.showBtn){var i=e('<div class="footer"></div>');if(t.confirm){this.confirm=e('<a class="btn btn-a confirm"><span class="inner"><span class="txt">'+t.confirm.text+"</span></span></a>");i.append(this.confirm)}if(t.cancel){this.cancel=e('<a class="btn btn-b cancel"><span class="inner"><span class="txt">'+t.cancel.text+"</span></span> </a>");i.append(this.cancel)}}var o=e('<div class="dialog-box '+t.className+'"><div class="head"><span class="close" title="关闭">关闭</span><h2 class="title">'+t.title+'</h2></div><div class="body"></div></div>');o.find(".body").append(n).append(i);this.element=o;e("body").append(this.element)}if(t.stick){e("body").append(this.element)}},_init:function(){var e=this,t=e.options;e._createDialog();e._initEvent();t.autoOpen&&e.show()},_createDialog:function(){var t=this,n=t.options;t.overlay=e("<div id='dialogBg' class='dialog-bg'></div>");t.dialogBox=t.element;!e("#dialogBg").length&&e("body").append(t.overlay);t.dialogBg=e("#dialogBg")},show:function(){var t=this,i=t.options;var o=t.dialogBox.outerHeight();if(i.bgiframe&&n){e(document).scrollTop(e(document).scrollTop()+1);e(document).scrollTop(e(document).scrollTop()+-1);if(!t.dialogBox.find("iframe").length){var r=e("<iframe frameborder=0>");r.css("height",o);t.dialogBox.append(r)}}if(i.showBg){if(n){t.dialogBg.css({display:"block",height:Math.max(e(document).height(),e(window).height())+"px"});t.dialogBg.find("iframe").css({height:Math.max(e(document).height(),e(window).height())+"px"})}t.dialogBg.show()}if(!t.dialogBox.hasClass("dialog-box")){t.dialogBox.addClass("dialog-box")}t.dialogBox.css({display:"block",width:i.width,"margin-left":-(i.width/2)+"px","margin-top":-(o/2)+(n?e(document).scrollTop():0)+"px"});t.dialogBox.fadeTo(i.fadeSpeed,1);n&&e("select").css("visibility","hidden")},hide:function(){var e=this;e._closeDialogbox()},_initEvent:function(){var e=this,t=e.options;e.dialogBox.find(t.close.btn).click(function(){e._closeDialogbox();t.close.callback();return false});var n=this.confirm?this.confirm:t.confirm?e.dialogBox.find(t.confirm.btn):null,i=this.cancel?this.cancel:t.cancel?e.dialogBox.find(t.cancel.btn):null;n&&n.bind("click",function(){t.confirm.callback();t.confirm.close&&e._closeDialogbox();if(!t.confirm.isLink){return false}});i&&i.bind("click",function(){t.cancel.callback();t.cancel.close&&e._closeDialogbox();return false})},_closeDialogbox:function(){var t=this,i=t.options;n&&e("select").css("visibility","visible");t.dialogBox.fadeOut(i.fadeSpeed,function(){if(i.destroy){t.element.remove()}});t.dialogBg.hide()},destroy:function(){}})})(jQuery);var ting=ting||{};void function(){var e={};e.isSpecial=function(){try{var e=window.external.GetVersion("version");if(e=="baidubrowser.music"){return true}else{return false}}catch(t){return false}};e.add2box=function(e){switch(e){case"play":$(".icon-add2box").removeClass("collect");$(".icon-add2box").addClass("play");break;case"collect":$(".icon-add2box").removeClass("play");$(".icon-add2box").addClass("collect");break;default:break}$(".layout-bdbrowser").fadeIn();setTimeout(function(){$(".layout-bdbrowser").fadeOut()},2e3)};ting.browser=e}();(function(e,t){var n={up:"up",active:"active",over:"over",down:"down",disable:"disabled"};e.widget("ting.button",{options:{state:"up",data:null},_create:function(){this.widgetEventPrefix="button."},_init:function(){var e=this;this._state=this.options.state;this.element.bind("mousedown",function(t){if(e.state()!=n.disable){return e._trigger("mousedown",t,null)}else{return false}});this.element.bind("click",function(t){if(e.state()!=n.disable){return e._trigger("click",t,null)}else{return false}})},data:function(e){if(t===e){return this.options.data}else{this.options.data=e}},state:function(e){if(this.element.hasClass(n.disable)){this._state=n.disable}if(t!=e){e=n[e]||n.up;this.element.removeClass(this._state).addClass(e);this._state=e}else{return this._state}},enable:function(){this.state("up")},disable:function(){this.state("disable")},active:function(){this.state("active")}})})(jQuery);(function(e){e(function(){ting.traceSource.setCookie();ting.traceSource.postLog();e.widget("ui.fixed",{options:{animation:true,top:100},_create:function(){var t=e.browser.msie&&parseInt(e.browser.version,10)<7;if(t){var n=this.options,i=this.element;i.css({position:"absolute"});this[n.animation?"_fixedAnimate":"_fixed"]()}},_fixedAnimate:function(){var t=this.options,n=this.element,i=e(window),o=null;i.on("scroll.fixed",function(){if(o){clearTimeout(o);o=null}o=setTimeout(function(){var e=i.scrollTop()+t.top;n.animate({top:e})},300)})},_fixed:function(){var t=this.options,n=this.element,i=e(window);i.on("scroll.fixed",function(){var e=i.scrollTop()+t.top;n.css({top:e})})}});e(".hao123-side-panel").fixed({top:225});require(["sug/init"]);var t="0";var n="";var i="";if(ting.userInfo){if(ting.userInfo.active){t="1";n=ting.userInfo.userId;i=ting.userInfo.userType}else{t="2"}}jQuery.cookie("u_lo",t,{path:"/",expires:30});jQuery.cookie("u_id",n,{path:"/",expires:30});jQuery.cookie("u_t",i,{path:"/",expires:30});ting.LL.add(".lazyload:not(.notlazy .lazyload)");if(ting.userBarInit){ting.userBarInit()}e("#weixin_follow").hoverShow(e("#weixin_detail"),{delay:0});e(".nav").find("a").click(function(){var t=e(this);ting.logger.plogClick(t.data("log"))});e("#myMbox").click(function(){ting.logger.log("click",{pos:"home_box"});ting.media.openPlayer();e(this).tip().tip("tipup",{msg:"音乐盒已打开",iconClass:"tip-warning"});return false});ting.vipTip_off=function(){var t=ting.userInfo||{},n=t.vip||{},i=n.cloud||{},o=i.xrank,r={4104:1,8200:1},a=-43;if(false&&r[o]){return}var s="mvip_4104";if(e.cookie("mvip_4104")){return}var l=e("#vip_tips"),c=e("#vip_tips_text_vip"),u=e("#vip_tips_text_not_vip"),d=l.find(".vip-tips-close"),f=l.find(".vip-tips-btn"),p=ting.userInfo?e("#anchor-user-vip"):e("#loginbtn"),g=p.offset(),h=g.left,m=p.width(),v=e(window).width(),b=v-h-m/2+a,y=function(){var t;t=new Date;t.setDate(t.getDate()+1);t.setHours(0);t.setMinutes(0);t.setSeconds(0);e.cookie(s,1,{path:"/",expires:t})};if(!t.vip){u.html("百度音乐<em>免费</em>送2个月VIP会员");u.show();c.hide();l.addClass("not-vip")}else if(t.vip.cloud&&t.vip.cloud.end_time*1e3<=(new Date).valueOf()+432e6){u.html("您的VIP资格即将到期");u.show();c.hide();l.addClass("not-vip");var w=(new Date).valueOf()>13703616e5;f.html(w?"立即续期":"免费续期");l.attr("href",w?"/mobile?pst=tips":"/mobile?pst=tips")}else if(t.vip.cloud){c.html("<em>免费续期</em>2个月VIP");c.show();u.hide();l.addClass("is-vip")}l.css("right",b).show();l.click(function(){l.hide();y();return true});d.click(function(){l.hide();y();return false})};ting.getBatchDownPower=1;ting.logger.logResolution()});e(".down-android").on("click",function(){var e={ref:"music_web",pos:"dl_app"};ting.logger.log("click",e)});e(".down-pc").on("click",function(){var e={ref:"music_web",pos:"dl_pcclient"};ting.logger.log("click",e)});var t=e(".down-preview-wrapper");t.find(".close").on("click",function(){t.hide()});e("#hao123SiteSub").hover(function(){e(this).addClass("hover")},function(){e(this).removeClass("hover")});require(["goTop"])})(jQuery);(function(){var e=this,t=e._,n={},i=Array.prototype,o=Object.prototype,r=Function.prototype,a=i.push,s=i.slice,l=i.concat,c=o.toString,u=o.hasOwnProperty,d=i.forEach,f=i.map,p=i.reduce,g=i.reduceRight,h=i.filter,m=i.every,v=i.some,b=i.indexOf,y=i.lastIndexOf,w=Array.isArray,k=Object.keys,x=r.bind,_=function(e){return e instanceof _?e:this instanceof _?void(this._wrapped=e):new _(e)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=_),exports._=_):e._=_,_.VERSION="1.6.0";var C=_.each=_.forEach=function(e,t,i){if(null==e)return e;if(d&&e.forEach===d)e.forEach(t,i);else if(e.length===+e.length){for(var o=0,r=e.length;r>o;o++)if(t.call(i,e[o],o,e)===n)return}else for(var a=_.keys(e),o=0,r=a.length;r>o;o++)if(t.call(i,e[a[o]],a[o],e)===n)return;return e};_.map=_.collect=function(e,t,n){var i=[];return null==e?i:f&&e.map===f?e.map(t,n):(C(e,function(e,o,r){i.push(t.call(n,e,o,r))}),i)};var S="Reduce of empty array with no initial value";_.reduce=_.foldl=_.inject=function(e,t,n,i){var o=arguments.length>2;if(null==e&&(e=[]),p&&e.reduce===p)return i&&(t=_.bind(t,i)),o?e.reduce(t,n):e.reduce(t);if(C(e,function(e,r,a){o?n=t.call(i,n,e,r,a):(n=e,o=!0)}),!o)throw new TypeError(S);return n},_.reduceRight=_.foldr=function(e,t,n,i){var o=arguments.length>2;if(null==e&&(e=[]),g&&e.reduceRight===g)return i&&(t=_.bind(t,i)),o?e.reduceRight(t,n):e.reduceRight(t);var r=e.length;if(r!==+r){var a=_.keys(e);r=a.length}if(C(e,function(s,l,c){l=a?a[--r]:--r,o?n=t.call(i,n,e[l],l,c):(n=e[l],o=!0)}),!o)throw new TypeError(S);return n},_.find=_.detect=function(e,t,n){var i;return $(e,function(e,o,r){return t.call(n,e,o,r)?(i=e,!0):void 0}),i},_.filter=_.select=function(e,t,n){var i=[];return null==e?i:h&&e.filter===h?e.filter(t,n):(C(e,function(e,o,r){t.call(n,e,o,r)&&i.push(e)}),i)},_.reject=function(e,t,n){return _.filter(e,function(e,i,o){return!t.call(n,e,i,o)},n)},_.every=_.all=function(e,t,i){t||(t=_.identity);var o=!0;return null==e?o:m&&e.every===m?e.every(t,i):(C(e,function(e,r,a){return(o=o&&t.call(i,e,r,a))?void 0:n}),!!o)};var $=_.some=_.any=function(e,t,i){t||(t=_.identity);var o=!1;return null==e?o:v&&e.some===v?e.some(t,i):(C(e,function(e,r,a){return o||(o=t.call(i,e,r,a))?n:void 0}),!!o)};_.contains=_.include=function(e,t){return null==e?!1:b&&e.indexOf===b?e.indexOf(t)!=-1:$(e,function(e){return e===t})},_.invoke=function(e,t){var n=s.call(arguments,2),i=_.isFunction(t);return _.map(e,function(e){return(i?t:e[t]).apply(e,n)})},_.pluck=function(e,t){return _.map(e,_.property(t))},_.where=function(e,t){return _.filter(e,_.matches(t))},_.findWhere=function(e,t){return _.find(e,_.matches(t))},_.max=function(e,t,n){if(!t&&_.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.max.apply(Math,e);var i=-1/0,o=-1/0;return C(e,function(e,r,a){var s=t?t.call(n,e,r,a):e;s>o&&(i=e,o=s)}),i},_.min=function(e,t,n){if(!t&&_.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.min.apply(Math,e);var i=1/0,o=1/0;return C(e,function(e,r,a){var s=t?t.call(n,e,r,a):e;o>s&&(i=e,o=s)}),i},_.shuffle=function(e){var t,n=0,i=[];return C(e,function(e){t=_.random(n++),i[n-1]=i[t],i[t]=e}),i},_.sample=function(e,t,n){return null==t||n?(e.length!==+e.length&&(e=_.values(e)),e[_.random(e.length-1)]):_.shuffle(e).slice(0,Math.max(0,t))};var I=function(e){return null==e?_.identity:_.isFunction(e)?e:_.property(e)};_.sortBy=function(e,t,n){return t=I(t),_.pluck(_.map(e,function(e,i,o){return{value:e,index:i,criteria:t.call(n,e,i,o)}}).sort(function(e,t){var n=e.criteria,i=t.criteria;if(n!==i){if(n>i||n===void 0)return 1;if(i>n||i===void 0)return-1}return e.index-t.index}),"value")};var L=function(e){return function(t,n,i){var o={};return n=I(n),C(t,function(r,a){var s=n.call(i,r,a,t);e(o,s,r)}),o}};_.groupBy=L(function(e,t,n){_.has(e,t)?e[t].push(n):e[t]=[n]}),_.indexBy=L(function(e,t,n){e[t]=n}),_.countBy=L(function(e,t){_.has(e,t)?e[t]++:e[t]=1}),_.sortedIndex=function(e,t,n,i){n=I(n);for(var o=n.call(i,t),r=0,a=e.length;a>r;){var s=r+a>>>1;n.call(i,e[s])<o?r=s+1:a=s}return r},_.toArray=function(e){return e?_.isArray(e)?s.call(e):e.length===+e.length?_.map(e,_.identity):_.values(e):[]},_.size=function(e){return null==e?0:e.length===+e.length?e.length:_.keys(e).length},_.first=_.head=_.take=function(e,t,n){return null==e?void 0:null==t||n?e[0]:0>t?[]:s.call(e,0,t)},_.initial=function(e,t,n){return s.call(e,0,e.length-(null==t||n?1:t))},_.last=function(e,t,n){return null==e?void 0:null==t||n?e[e.length-1]:s.call(e,Math.max(e.length-t,0))},_.rest=_.tail=_.drop=function(e,t,n){return s.call(e,null==t||n?1:t)},_.compact=function(e){return _.filter(e,_.identity)};var T=function(e,t,n){return t&&_.every(e,_.isArray)?l.apply(n,e):(C(e,function(e){_.isArray(e)||_.isArguments(e)?t?a.apply(n,e):T(e,t,n):n.push(e)}),n)};_.flatten=function(e,t){return T(e,t,[])},_.without=function(e){return _.difference(e,s.call(arguments,1))},_.partition=function(e,t){var n=[],i=[];return C(e,function(e){(t(e)?n:i).push(e)}),[n,i]},_.uniq=_.unique=function(e,t,n,i){_.isFunction(t)&&(i=n,n=t,t=!1);var o=n?_.map(e,n,i):e,r=[],a=[];return C(o,function(n,i){(t?i&&a[a.length-1]===n:_.contains(a,n))||(a.push(n),r.push(e[i]))}),r},_.union=function(){return _.uniq(_.flatten(arguments,!0))},_.intersection=function(e){var t=s.call(arguments,1);return _.filter(_.uniq(e),function(e){return _.every(t,function(t){return _.contains(t,e)})})},_.difference=function(e){var t=l.apply(i,s.call(arguments,1));return _.filter(e,function(e){return!_.contains(t,e)})},_.zip=function(){for(var e=_.max(_.pluck(arguments,"length").concat(0)),t=new Array(e),n=0;e>n;n++)t[n]=_.pluck(arguments,""+n);return t},_.object=function(e,t){if(null==e)return{};for(var n={},i=0,o=e.length;o>i;i++)t?n[e[i]]=t[i]:n[e[i][0]]=e[i][1];return n},_.indexOf=function(e,t,n){if(null==e)return-1;var i=0,o=e.length;if(n){if("number"!=typeof n)return i=_.sortedIndex(e,t),e[i]===t?i:-1;i=0>n?Math.max(0,o+n):n}if(b&&e.indexOf===b)return e.indexOf(t,n);for(;o>i;i++)if(e[i]===t)return i;return-1},_.lastIndexOf=function(e,t,n){if(null==e)return-1;var i=null!=n;if(y&&e.lastIndexOf===y)return i?e.lastIndexOf(t,n):e.lastIndexOf(t);for(var o=i?n:e.length;o--;)if(e[o]===t)return o;return-1},_.range=function(e,t,n){arguments.length<=1&&(t=e||0,e=0),n=arguments[2]||1;for(var i=Math.max(Math.ceil((t-e)/n),0),o=0,r=new Array(i);i>o;)r[o++]=e,e+=n;return r};var j=function(){};_.bind=function(e,t){var n,i;if(x&&e.bind===x)return x.apply(e,s.call(arguments,1));if(!_.isFunction(e))throw new TypeError;return n=s.call(arguments,2),i=function(){if(!(this instanceof i))return e.apply(t,n.concat(s.call(arguments)));j.prototype=e.prototype;var o=new j;j.prototype=null;var r=e.apply(o,n.concat(s.call(arguments)));return Object(r)===r?r:o}},_.partial=function(e){var t=s.call(arguments,1);return function(){for(var n=0,i=t.slice(),o=0,r=i.length;r>o;o++)i[o]===_&&(i[o]=arguments[n++]);for(;n<arguments.length;)i.push(arguments[n++]);return e.apply(this,i)}},_.bindAll=function(e){var t=s.call(arguments,1);if(0===t.length)throw new Error("bindAll must be passed function names");return C(t,function(t){e[t]=_.bind(e[t],e)}),e},_.memoize=function(e,t){var n={};return t||(t=_.identity),function(){var i=t.apply(this,arguments);return _.has(n,i)?n[i]:n[i]=e.apply(this,arguments)}},_.delay=function(e,t){var n=s.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},_.defer=function(e){return _.delay.apply(_,[e,1].concat(s.call(arguments,1)))},_.throttle=function(e,t,n){var i,o,r,a=null,s=0;n||(n={});var l=function(){s=n.leading===!1?0:_.now(),a=null,r=e.apply(i,o),i=o=null};return function(){var c=_.now();s||n.leading!==!1||(s=c);var u=t-(c-s);return i=this,o=arguments,0>=u?(clearTimeout(a),a=null,s=c,r=e.apply(i,o),i=o=null):a||n.trailing===!1||(a=setTimeout(l,u)),r}},_.debounce=function(e,t,n){var i,o,r,a,s,l=function(){var c=_.now()-a;t>c?i=setTimeout(l,t-c):(i=null,n||(s=e.apply(r,o),r=o=null))};return function(){r=this,o=arguments,a=_.now();var c=n&&!i;return i||(i=setTimeout(l,t)),c&&(s=e.apply(r,o),r=o=null),s}},_.once=function(e){var t,n=!1;return function(){return n?t:(n=!0,t=e.apply(this,arguments),e=null,t)}},_.wrap=function(e,t){return _.partial(t,e)},_.compose=function(){var e=arguments;return function(){for(var t=arguments,n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},_.after=function(e,t){return function(){return--e<1?t.apply(this,arguments):void 0}},_.keys=function(e){if(!_.isObject(e))return[];if(k)return k(e);var t=[];for(var n in e)_.has(e,n)&&t.push(n);return t},_.values=function(e){for(var t=_.keys(e),n=t.length,i=new Array(n),o=0;n>o;o++)i[o]=e[t[o]];return i},_.pairs=function(e){for(var t=_.keys(e),n=t.length,i=new Array(n),o=0;n>o;o++)i[o]=[t[o],e[t[o]]];return i},_.invert=function(e){for(var t={},n=_.keys(e),i=0,o=n.length;o>i;i++)t[e[n[i]]]=n[i];return t},_.functions=_.methods=function(e){var t=[];for(var n in e)_.isFunction(e[n])&&t.push(n);return t.sort()},_.extend=function(e){return C(s.call(arguments,1),function(t){if(t)for(var n in t)e[n]=t[n]}),e},_.pick=function(e){var t={},n=l.apply(i,s.call(arguments,1));return C(n,function(n){n in e&&(t[n]=e[n])}),t},_.omit=function(e){var t={},n=l.apply(i,s.call(arguments,1));for(var o in e)_.contains(n,o)||(t[o]=e[o]);return t},_.defaults=function(e){return C(s.call(arguments,1),function(t){if(t)for(var n in t)e[n]===void 0&&(e[n]=t[n])}),e},_.clone=function(e){return _.isObject(e)?_.isArray(e)?e.slice():_.extend({},e):e},_.tap=function(e,t){return t(e),e};var A=function(e,t,n,i){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;e instanceof _&&(e=e._wrapped),t instanceof _&&(t=t._wrapped);var o=c.call(e);if(o!=c.call(t))return!1;switch(o){case"[object String]":return e==String(t);case"[object Number]":return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if("object"!=typeof e||"object"!=typeof t)return!1;for(var r=n.length;r--;)if(n[r]==e)return i[r]==t;var a=e.constructor,s=t.constructor;if(a!==s&&!(_.isFunction(a)&&a instanceof a&&_.isFunction(s)&&s instanceof s)&&"constructor"in e&&"constructor"in t)return!1;n.push(e),i.push(t);var l=0,u=!0;if("[object Array]"==o){if(l=e.length,u=l==t.length)for(;l--&&(u=A(e[l],t[l],n,i)););}else{for(var d in e)if(_.has(e,d)&&(l++,!(u=_.has(t,d)&&A(e[d],t[d],n,i))))break;if(u){for(d in t)if(_.has(t,d)&&!l--)break;u=!l}}return n.pop(),i.pop(),u};_.isEqual=function(e,t){return A(e,t,[],[])},_.isEmpty=function(e){if(null==e)return!0;if(_.isArray(e)||_.isString(e))return 0===e.length;for(var t in e)if(_.has(e,t))return!1;return!0},_.isElement=function(e){return!(!e||1!==e.nodeType)},_.isArray=w||function(e){return"[object Array]"==c.call(e)},_.isObject=function(e){return e===Object(e)},C(["Arguments","Function","String","Number","Date","RegExp"],function(e){_["is"+e]=function(t){return c.call(t)=="[object "+e+"]"}}),_.isArguments(arguments)||(_.isArguments=function(e){return!(!e||!_.has(e,"callee"))}),"function"!=typeof/./&&(_.isFunction=function(e){return"function"==typeof e}),_.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},_.isNaN=function(e){return _.isNumber(e)&&e!=+e},_.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"==c.call(e)},_.isNull=function(e){return null===e},_.isUndefined=function(e){return e===void 0},_.has=function(e,t){return u.call(e,t)},_.noConflict=function(){return e._=t,this},_.identity=function(e){return e},_.constant=function(e){return function(){return e}},_.property=function(e){return function(t){return t[e]}},_.matches=function(e){return function(t){if(t===e)return!0;for(var n in e)if(e[n]!==t[n])return!1;return!0}},_.times=function(e,t,n){for(var i=Array(Math.max(0,e)),o=0;e>o;o++)i[o]=t.call(n,o);return i},_.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},_.now=Date.now||function(){return(new Date).getTime()};var B={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};B.unescape=_.invert(B.escape);var N={escape:new RegExp("["+_.keys(B.escape).join("")+"]","g"),unescape:new RegExp("("+_.keys(B.unescape).join("|")+")","g")};_.each(["escape","unescape"],function(e){_[e]=function(t){return null==t?"":(""+t).replace(N[e],function(t){return B[e][t]})}}),_.result=function(e,t){if(null==e)return void 0;var n=e[t];return _.isFunction(n)?n.call(e):n},_.mixin=function(e){C(_.functions(e),function(t){var n=_[t]=e[t];_.prototype[t]=function(){var e=[this._wrapped];return a.apply(e,arguments),R.call(this,n.apply(_,e))}})};var D=0;_.uniqueId=function(e){var t=++D+"";return e?e+t:t},_.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var M=/(.)^/,O={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},F=/\\|'|\r|\n|\t|\u2028|\u2029/g;_.template=function(e,t,n){var i;n=_.defaults({},n,_.templateSettings);var o=new RegExp([(n.escape||M).source,(n.interpolate||M).source,(n.evaluate||M).source].join("|")+"|$","g"),r=0,a="__p+='";e.replace(o,function(t,n,i,o,s){return a+=e.slice(r,s).replace(F,function(e){return"\\"+O[e]}),n&&(a+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),i&&(a+="'+\n((__t=("+i+"))==null?'':__t)+\n'"),o&&(a+="';\n"+o+"\n__p+='"),r=s+t.length,t}),a+="';\n",n.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,"+"print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{i=new Function(n.variable||"obj","_",a)}catch(s){throw s.source=a,s}if(t)return i(t,_);var l=function(e){return i.call(this,e,_)};return l.source="function("+(n.variable||"obj")+"){\n"+a+"}",l},_.chain=function(e){return _(e).chain()};var R=function(e){return this._chain?_(e).chain():e};_.mixin(_),C(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=i[e];_.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!=e&&"splice"!=e||0!==n.length||delete n[0],R.call(this,n)}}),C(["concat","join","slice"],function(e){var t=i[e];_.prototype[e]=function(){return R.call(this,t.apply(this._wrapped,arguments))}}),_.extend(_.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}}),"function"==typeof define&&define.amd&&define("underscore",[],function(){return _})}).call(this);
/** If u are interested in our code and would like to make it robust, just contact us^^ <@音乐前端> **/
/** Generated by M3D. **/