(function(t){t.widget("ting.songlistExpand",{options:{songlistDiv:".songlist-expand",actionHook:".action-hook",type:"",id:"",url:"/data/music/songlist",hotBar:false,moduleName:null,noAlbum:false},_create:function(){var t=this,a=t.element,i=t.options;t.widgetEventPrefix="songlistexpand.";t.$albumItem=a.parents("li");t.$action=a.find(i.actionHook);t.$songlistDiv=t.$albumItem.find(i.songlistDiv);t.type=a.data("songlistexpand").type||i.type;t.id=a.data("songlistexpand").id||i.id;t.name=a.data("songlistexpand").name||i.name;t.loaded=false},_init:function(){var a=this,i=a.element,e=a.options;i.bind("click",function(){if(i.hasClass("fold")){if(!a.loaded){a.expandSongs(a.type,a.id,a.name);a.loaded=true}else{a.display(a.$songlistDiv,"show")}i.removeClass("fold").addClass("unfold");a.$action.text("收起");if(ting&&ting.logger&&ting.logger.plogClick){ting.logger.plogClick("unfold")}}else{a.display(a.$songlistDiv,"hide");i.removeClass("unfold").addClass("fold");a.$action.text("展开");if(ting&&ting.logger&&ting.logger.plogClick){ting.logger.plogClick("fold")}}return false});a.$albumItem.find("div.info").bind("mouseenter",function(a){t(this).addClass("bgc-gray")}).bind("mouseleave",function(a){t(this).removeClass("bgc-gray")}).bind("click",function(a){var e=a.target;var n=t(e).parents(".btn");var s=t(e).parents(".album-face, .artist-face");var o=e.className;var l=e.tagName.toLowerCase();if(l!=="a"&&l!=="em"&&o!=="frame"&&!n.length&&!s.length){i.click()}})},expandSongs:function(a,i,e){var n=this;opt=n.options;n.$songlistDiv.addClass("loading-data");n.display(n.$songlistDiv,"show");var s=opt.hotBar?"hotbar=1":"",o=opt.moduleName?"&moduleName="+opt.moduleName:"",l=opt.noAlbum?"&noAlbum=1":"",r=opt.url+"?"+s+o+l;t.ajax({type:"POST",url:r,data:{id:i,type:a},dataType:"json",success:function(a){var i=a;var s=i.errorCode;var o=i.data.html;if(s=="22000"&&o){n.$songlistDiv.append(t(o)).removeClass("loading-data");n.$songlistDiv.find(".song-list-hook").songList({type:"album",data:{albumname:e}});n.$songlistDiv.find(".music-icon-hook").musicIcon()}else if(s="22001"){n.$songlistDiv.append("<p style='text-align:center;' class='no-data c9'>该专辑暂无歌曲</p>").removeClass("loading-data")}n._trigger("expanded")}})},display:function(t,a){t.animate({height:a,opacity:a},"fast");if(a=="show"){this.$albumItem.removeClass("bb").addClass("bbs")}else{this.$albumItem.removeClass("bbs").addClass("bb")}}})})(jQuery);(function(t){t(function(){t("#ting_recommend .album-cover-hook").albumCover();t("#target_album .album-cover-hook").albumCover();t("#album_list .album-cover-hook").albumCover();t("#ting_recommend .rool-hook").roll({rollNum:5,screen:".rool-inner",rollList:".rool-inner ul",leftBtn:".rool-left-btn",rightBtn:".rool-right-btn"});t(".play-hotsong-hook").bind("click",function(){var a=t(this).data("playdata").ids,i={moduleName:t(this).data("playdata").moduleName,searchValue:t(this).data("playdata").searchValue};ting.media.playSong(a,i);return false});t(".album-add").bind("click",function(){var a=t(this).data("adddata").id,i={moduleName:t(this).data("adddata").moduleName,searchValue:t(this).data("adddata").searchValue};ting.media.playAlbum(a,i);$me.tip();$me.tip("tipup",{msg:"添加成功！",iconClass:"tip-success"})});t("#album_list .songlist-fold-hook").songlistExpand({moduleName:"albumlist",noAlbum:true});t("#artist_list .songlist-fold-hook").songlistExpand({moduleName:"artisthotsong"});if(t(".copy-lyric").length){var a=new ZeroClipboard(null,{moviePath:"/static/flash/ZeroClipboard.swf"});a.on("load",function(){t(".copy-lyric-hook").show()});var i=null;a.on("complete",function(a,e){t(i).tip({msg:"复制成功",iconClass:"tip-success"});t(i).tip("tipup")});t(".copy-lyric").live("mouseenter",function(){var e=t(this)[0];a.setCurrent(e);i=e})}t("#lrc_list .down-lrc-btn").click(function(){window.location=t(this).metadata().href;return false});var e=t('input[name="key"]').val();var n=t("#query_type").val();var s=function(a,i,s){var o={page:"searchresult",sub:n,logtype:i,key:e},l=t("#result_container").data("tagstyle");if(l){o.tag=l}if(a){o.pos=a}if(s){for(var r in s){o[r]=s[r]}}ting.logger.log("clicksearch",o)};s(null,"exposure_pv");var o=function(a){var i=t(a),e=a.tagName.toLowerCase(),n={};if(e==="a"||i.parents("a").length){var s=e==="a"?i:i.parents("a");n.isLink=true;n.lnk=s;if(s.hasClass("btn")){n.isLink=s.hasClass("btn-disabled")?false:true;n.lnkType="btn"}else if(s.hasClass("list-micon")){n.lnkType="ico"}else if(s.children("img").length){n.lnkType="img"}else{n.lnkType="txt"}}else{n.isLink=false}return n};var l=function(a){var i=t(a).parents("li.song-item-hook");if(i.length){var e=i.data("songitem").songItem.sid;if(e&&isNaN(e)){return true}}return false};var r=function(a,i,e){var n=0;t(a).each(function(){t(this).bind("mousedown",function(a){var r=o(a.target),c=r.isLink,g={};if(/group-/.test(i)){g.act="detailpage"}if(c){var u=r.lnk,d=r.lnkType,m=false;g.linktype=d,$item=u.parents("li.song-item-hook");g.resourcetype=0;if(d==="txt"||d==="ico"){m=l(u);if(m){g.resourcetype=1}}try{var p=u.parents(".song-item-hook").data("songitem").songItem;g.song_id=p.sid;g.original_song_id=p.oid}catch(a){}switch(d){case"ico":var f=u.data("action");g.act=f==="add"||f==="play"?"audio":f;break;case"btn":if(u.hasClass("play-selected-hook")||u.hasClass("add-selected-hook")){g.act="audio"}else if(u.hasClass("collect-selected-hook")){g.act="collect"}break;case"txt":if($item.length&&!(m&&u.parents(".song-title").length||u.children(".unreleased").length)){if(u.parents(".song-title").length){g.act="song_name"}else if(u.parents(".singer").length){g.act="artist_name"}else if(u.parents(".album-title").length){g.act="album_name"}else{g.act="detailpage"}}else if(u.hasClass("album-play")||u.hasClass("play-hot-btn")||u.hasClass("songlist-all-play")){g.act="play"}break;default:break}if(u&&u.hasClass("master-song")){if(u.hasClass("fold-down")){g.act="unfold"}else{g.act="fewer"}}if($item.length){if(t(".master-song",$item).length){g.u_tag="unfold_0"}}}if(c&&n==0){if(e===undefined){s(i,"click_pv",g);n=1}else if(e=="click_num"){var h=t(a.target);var b={};var v=h.parents(".song-item-hook").data("log-recommend");if(v){b.recommend=v}b.page_num=t(".page-navigator-current").html()||1;b.position=t(".song-item").index(h.parents(".song-item"));t.extend(g,b);s(i,"click_num",g)}}})})};if(t("#target_banner").length){r("#target_banner .target-artist","targetbanner_artist");r("#target_banner .target-album","targetbanner_album");r("#target_banner .target-tag","targetbanner_tag");r("#target_banner .target-artist","targetbanner_artist","click_num");r("#target_banner .target-album","targetbanner_album","click_num");r("#target_banner .target-tag","targetbanner_tag","click_num")}r("#result_container .song-list","resultcontent");r("#first_song_li","firstsong");r("#first_artist_li","firstartist");r("#first_album_li","firstalbum");r("#first_lrc_li","firstlrc");r("#result_container .song-list","resultcontent","click_num");r("#rec_tag","recommend_tag");r("#rec_tag","recommend_tag","click_num");r(".group-album a","group-album");r(".group-album a","group-album","click_num");r(".group-artist a","group-artist");r(".group-artist a","group-artist","click_num");r(".group-songlist a","group-songlist");r(".group-songlist a","group-songlist","click_num");r(".group-mv a","group-mv");r(".group-mv a","group-mv","click_num");r(".group-ybaidu a","group-ybaidu");r(".group-ybaidu a","group-ybaidu","click_num");r("#rec-movie-list a","rec-movie-list");r("#rec-movie-list a","rec-movie-list","click_num");var c=t(".btn-singer-fm");c.bind("click",function(){var a=encodeURIComponent(t(this).attr("artist"));if(t(this).attr("href")=="#"){t(this).attr("href","http://fm.baidu.com/#/channel/public_artist_"+a)}});t(".ttp-down-btn").bind("click",function(){ting.logger.log("click",{page:"m_search_song",pos:"down_qianqian"})});t(".syn-key").bind("click",function(){var a=t(this);ting.logger.log("clicksearch",{page:"searchresult",pos:"synlink",synkey:a.html(),key:e,syn:a.data("syn")})})});function a(){var a=t(".fwb").html()||"empty",i=t("input",t("#questions")).eq(0).attr("checked")?0:1,e=t("#user-suggest").val()||"";ting.logger.log("search_null",{key:a,content:e,num:i})}var i=t(".search-artist");if(i.length){var e=t("li",i);var n;e.each(function(a,i){i=t(i);i.on("mouseenter",function(){var a=t(this),i=a.find(".hot-info"),e=i.data("num");if(e){if(!n){a.append('<div id="listen-indicator">'+e+"人听过</div>");n=t("#listen-indicator")}i.append(n.remove());n.html(e+"人听过");n.show()}});i.on("mouseleave",function(){n&&n.hide()})})}t(".group-album .album-cover-hook").albumCover();t(".group-songlist .songlist-all-play").click(function(){var a=t(this),i=t(this).data("song").listid,e=a.data("song"),n=e.ids,s={moduleName:e.moduleName,searchValue:e.searchValue},o=e.logAction;ting.media.playSong(n,s);a.tip().tip("tipup",{msg:"已开始播放",iconClass:"tip-success"});t.ajax({url:"/data/music/songlist/listen?playlistId="+i+"&t="+new Date*1});if(ting&&ting.logger&&ting.logger.plogClick){ting.logger.plogClick(o)}if(ting.browser.isSpecial()){ting.browser.add2box("play")}return false});if(similarMboxBtn=t("#similarMbox")){mboxPage=similarMboxBtn.attr("mboxpage");ting.logger.log("exposure",{page:mboxPage,expoitem:"enter_radio"});similarMboxBtn.click(function(){ting.logger.log("click",{page:mboxPage,pos:"enter_radio",sub:""})})}t(".group-artist .play-hot-btn").bind("click",function(){var a={},i=t(this),e=i.data("playdata");if(e.ids){ting.media.playSong(e.ids,{moduleName:e.moduleName,searchValue:e.searchValue||""});i.tip().tip("tipup",{msg:"已开始播放",iconClass:"tip-success"})}return false});t("#film-change").on("click",function(){require(["slider"],function(a){new a(t("#rec-movie-list"),t("#film-change"),250,"changeRight")});t(this).off("click")});t(".music-icon-hook").musicIcon();t(".rec-film-all-play").click(function(){var a=t(this),i=a.data("song"),e=i.ids,n={moduleName:i.moduleName,searchValue:i.searchValue||""},s=i.logAction;ting.media.playSong(e,n);a.tip().tip("tipup",{msg:"已开始播放",iconClass:"tip-success"});if(ting&&ting.logger&&ting.logger.plogClick){ting.logger.plogClick(s)}if(ting.browser.isSpecial()){ting.browser.add2box("play")}return false})})(jQuery);(function(){var t=t||{};t.tipLogger=function(t,a,i){ting.logger.log("click",{page:t,pos:a,sub:i})};t.clickLogger=function(a,i,e,n){$(a).click(function(){t.tipLogger(i,e,n)})};t.clickLogger(".ticket-link","m_search_artist","normal","tips")})();(function(){var t=$(".search-song-list ul li");var a=[];var i=[];var e=[];var n=$(".col-play");var s=$(".col-add");var o=$(".col-collect");var l=$(".col-down a");var r=$(".search-song-list").data("listdata");t.each(function(){if(!$(this).data("songitem").songItem.isJump){a.push($(this).data("songitem").songItem.sid)}});i=a.join("_");e=a.join(",");n.bind("click",function(){if(i){ting.media.playSong(i,r);$(this).tip().tip("tipup",{msg:"已开始播放！",iconClass:"tip-success"})}return false});s.bind("click",function(){if(i){ting.media.addSong(i,r);$(this).tip().tip("tipup",{msg:"添加成功！",iconClass:"tip-success"})}return false});o.bind("click",function(){if($(".song-item.yyr-song").length){var t=$('<div style="text-align: left;">您需要访问 <a target="_blank" href="http://y.baidu.com">百度音乐人</a>平台，获取音乐下载。</div>');var a=$("a.cover").attr("href");t.dialog({className:"dialog-message",showBtn:true,confirm:{btn:"",close:true,callback:function(){window.open(a)},text:"立即去下载"},cancel:false,destroy:true,title:"&nbsp;",width:360,showBg:true}).dialog("show");return false}var i=e;if($(this).hasClass("dis-col-collect")){return false}ting.connect.collect(null,{ids:i,type:"song"},function(t){o.tip().tip("tipup",{msg:"已保存到收藏列表！",iconClass:"tip-success"})},function(t){o.tip().tip("tipup",{msg:"歌曲已被保存",iconClass:"tip-warning"})});return false});l.bind("click",function(){if($(".song-item.yyr-song").length){var t=$('<div style="text-align: left;">您需要访问 <a target="_blank" href="http://y.baidu.com">百度音乐人</a>平台，获取音乐下载。</div>');var i=$("a.cover").attr("href");t.dialog({className:"dialog-message",showBtn:true,confirm:{btn:"",close:true,callback:function(){window.open(i)},text:"立即去下载"},cancel:false,destroy:true,title:"&nbsp;",width:360,showBg:true}).dialog("show");return false}if($(this).parent().hasClass("dis-col-down")){return false}ting.media.downloadAll(a);return false});var c=location.search.substring(1).split("&"),g={};$.each(c,function(t,a){a=a.split("=");g[a[0]]=a[1]});if(g.m==="tagcloud"){ting.logger.log("clicksearch",{key:g.key,page:"searchresult",pos:"tagcloud",sub:"song"})}})();(function(){function t(t,a){$(t).find(".changenother").bind("click",function(){var i=$(a).index();var e=$(t).find(".group-list").length-1;if(i<e){i++;$(t).find(".group-list").removeClass("now-tab");$(t).find(".group-list").eq(i).addClass("now-tab")}else{i=0;$(t).find(".group-list").removeClass("now-tab");$(t).find(".group-list").eq(i).addClass("now-tab")}return false})}t(".group-songlist",".group-songlist .now-tab");t(".group-album",".group-album .now-tab");t(".group-artist",".group-artist .now-tab");t(".group-mv",".group-mv .now-tab");var a=0,i=false;$("#updateArtist").bind("click",function(){var t=$(".related-list"),e=$(".related-list:visible");e.hide();++a;if(a>=t.length){a=0;i=true}if(!i){$(".cover img",$(t[a])).each(function(){var t=$(this).attr("org_src"),a=$(this).attr("src");if(t!=a){$(this).attr("src",t)}})}$(t[a]).show();return false})})();
/** If u are interested in our code and would like to make it robust, just contact us^^ <@音乐前端> **/
/** Generated by M3D. **/