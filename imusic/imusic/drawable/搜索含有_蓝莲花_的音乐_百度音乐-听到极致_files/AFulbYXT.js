define(["../vip/top_right_menu"],function(){var e=/\/king/.test(location.pathname);window.enterState=function(a){var i,n,s,t,l,o,r,c;s=encodeURIComponent(location.href);i={sTemplate:"guest",sUserName:"",sSpaceLink:"",sProfileURL:"http://passport.baidu.com/#0,1",sHomeURL:"http://passport.baidu.com/v2/?ucenteradduname",sPaylistURL:"/paylist",sMessageURL:"/user/message",sBaiduURL:"http://www.baidu.com",sBaiduPrivilegeURL:"http://tequan.baidu.com/?sc=music",sFeedBack:"http://tousu.baidu.com/music/add",sLoginURL:"javascript:;",sRegURL:"http://passport.baidu.com/v2/?reg&regType=1&tpl=music&u="+s,sLogoutURL:"http://passport.baidu.com/?logout&tpl=music&u="+s,sOpenMbox:'<a href="###" onclick="return ting.media.openPlayer(),false">音乐盒</a>',sMusicVIPURL:"/home/vip?pst=home"+(e?"&_vk=pay_k_load":""),sUsercenterURL:"/home/user",sReceiveURL:"/home/gift",enable_fee:false,sUserVipURL:"/home/vip"+(e?"?_vk=pay_k_load":""),vipIcon:"<span title='未开通VIP会员' class='power-icon-min index-icon-vipidentity'></span>",activeVipIcon:"<span title='成为音乐VIP会员' class='power-icon-min index-icon-vip-active'></span>"};n={guest:'<ul><li id="receiveActive" style="margin-right:20px; display:none;"><a rel="nofollow" href="#{sReceiveURL}"><span class="limit-active"></span>免费体验特权！</a></li><li><a  target="_blank" href="#{sBaiduURL}">百度首页</a></li><li class="line">|</li><li class="bd-feedback"><a target="_blank" href="#{sFeedBack}" ><i class="icon"></i>意见反馈</a></li><li class="line">|</li><li class="vip-intro"><a  target="_blank" href="#{sMusicVIPURL}"><span class="z1">音乐VIP</span><span class="mn-lk"></span></a><a target="_blank" href="#{sMusicVIPURL}"></a></li><li class="line">|</li><li><a rel="nofollow" href="#{sLoginURL}" id="loginbtn">登录</a><a target="_blank" href="#{sRegURL}" rel="nofollow">注册</a></li><li id="oldLine" style="display:none" class="line">|</li><li id="oldMp3Entry" style="display:none"><a href="/?goto=old_mp3">MP3旧版</a></li></ul>',user:'<ul><li id="receiveActive" style="margin-right:20px; display:none;"><a rel="nofollow" href="#{sReceiveURL}"><span class="limit-active"></span>免费体验特权！</a></li><li id="messageHint"  style="display: none;"><a rel="nofollow" href="#{sMessageURL}" target="_blank"><span class="message-count" id="msgCount"></span>条新消息</a><p class="close"></p></li><li class="uname mn-lk-w"><a id="anchor-user-name" href="#{sMusicVIPURL}" target="_blank">#{sSourceIcon}#{sUserName}<span class="mn-lk"></span></a><a id="anchor-user-vip" href="#{sUserVipURL}"></a><div id="menu-user"  style="display:none" class="mn-tip" style=" width:75px; right:0;"><ul class="mn"><li><a class="my-home" href="#{sHomeURL}" target="_blank" rel="nofollow">我的主页</a></li><li><a class="my-paylist" href="#{sPaylistURL}" target="_blank" rel="nofollow">购买记录</a></li><li><a class="my-message" href="#{sMessageURL}" target="_blank" rel="nofollow">通知中心<span class="my-count-wrap" id="myCountWrap">（<span class="my-count" id="myCount"></span>）</span></a></li><li><a class="my-info" href="#{sProfileURL}" target="_blank" rel="nofollow">帐号设置</a></li><li><a href="#{sLogoutURL}" class="logout" rel="nofollow" >退出</a></li></ul></div></li><li class="line">|</li><li class="bd-feedback"><a target="_blank" href="#{sFeedBack}" ><i class="icon"></i>意见反馈</a></li><li class="line">|</li><li class="vip-intro"><a id="userCenter" href="#{sMusicVIPURL}" target="_blank">我的VIP<span class="mn-lk"></span></a></li><li class="line" id="userCenterLine">|</li><li><a href="#{sBaiduURL}" target="_blank">百度首页</a></li></ul>'};r=function(){document.getElementById("userCenter").style.display="block";document.getElementById("userCenterLine").style.display="block"};showReceive=function(){document.getElementById("receiveActive").style.display="block"};c=function(){$.ajax({url:"/data/user/message/total",dataType:"json",success:function(e){if(e.errno==22e3&&!!e.data){var a=e.data.unread||0,i=$(".message-box");i.show();if(a>0){i.addClass("unread")}}}})};oCallbacks={guest:function(){var e=document.getElementById("loginbtn");var a=ting.passport.login||function(){ting.passport.checkLogin(function(){window.location.reload()},function(){},function(){},function(){})};if(e){if(!window.attachEvent){e.addEventListener("click",a,false)}else{e.attachEvent("onclick",a)}}else{}oCallbacks.invoked=true},user:function(){var e,a,i,n,s,t;e=document.getElementById("anchor-user-name");a=document.getElementById("menu-user");i=-1;n=500;s=false;t=false;function l(){if(s){if(t){a.style.display="none";t=false;clearInterval(i);i=-1}}}if(!!!e){return}e.onmouseover=function(){if(!t){a.style.display="block";t=true;s=false;if(i<0){i=setInterval(l,n)}}else{l()}return false};e.onmouseout=function(){s=true};a.onmouseover=function(){s=false};a.onmouseout=function(){s=true};oCallbacks.invoked=true}};function u(e,a){e=String(e);var i=Array.prototype.slice.call(arguments,1),n=Object.prototype.toString;if(i.length){i=i.length==1?a!==null&&/\[object Array\]|\[object Object\]/.test(n.call(a))?a:i:i;return e.replace(/#\{(.+?)\}/g,function(e,a){var s=i[a];if("[object Function]"==n.call(s)){s=s(a)}return"undefined"==typeof s?"":s})}return e}o=function(e,s){e=e||{};for(var l in i){if(e.hasOwnProperty(l)){continue}e[l]=i[l]}t=document.getElementById(a);if(t){t.innerHTML=u(n[e["sTemplate"]],e);passport.use("topBar",{tangram:false,library:$},function(e){var a=new e.passport.topBar({product:"music",u:"https://passport.baidu.com",staticPage:window.location.protocol+"//passport.baidu.com/passApi/html/jump.html",loginType:1,styleid:3});a.render("userbar");a.on("render",function(e){});a.on("jsClick",function(e){})})}if(e.enable_fee){showReceive();if(e["sTemplate"]=="user"){r()}}if(!!ting.userInfo){c()}oCallbacks[e["sTemplate"]]();if(s){s()}if(ting.vipTip)ting.vipTip.call();ting.vipTipReady=true;return false};var p=function(e){var a=$("#user-info");if(!a.length){return}if(e){a.html('<div class="info">                             <span class="icon-text">播放记录</span>                             <span class="icon-arrow"></span>                             </div>');a.hoverShow($("#play-info"),{onShow:function(){require(["ting/playInfo"])},onHide:function(){},delay:50})}else{a.html("")}};var d=function(e){if(e&&e.data){var a=e.data;if(a.vip&&a.vip.cloud){window.BDUS.vipState=a.vip.cloud.service_level}if(a.status){window.BDUS.status=a.status}else{window.BDUS.status="0"}}};var m=function(e){var a={id:"public_tuijian_suibiantingting",name:"随便听听",img:"//mu7.bdstatic.com/static/images/mbox_entry/suibian.png"};if(e&&e.errorCode==22e3){a={id:"private",name:"私人频道",img:"//mu5.bdstatic.com/static/images/mbox_entry/siren.png"}}var i=['<li class="entry-item first-item">','<a target="_blank" href="http://fm.baidu.com/#/channel/'+a.id+'">','<div class="entry-item-btn">','<span class= "entry-icon" style="background:url('+a.img+');"></span>','<span class= "entry-text">'+a.name+"</span>","</div>","</a>","</li>"].join("");var n=$("#mbox-entry-list");var s=n.html();n.html(i+s)};function f(e){var a,i,n,s,t,l;n=parseInt(e.errorCode);s=e.data;i={};t=e.data.passInfo||{};if(n==22e3){ting.passport&&(ting.passport.isLogin=true);ting.userInfo=e.data;a=s.bdName?s.bdName:s.bdEmail?s.bdEmail:s.bdMobile?s.bdMobile:t.displayname;i.sUserName=a;i.sTemplate="user";i.sHomeURL="http://i.baidu.com/?from=music";i.enable_fee=!!s.enable_fee;if(s.vip){try{var r=s.vip.cloud.service_level}catch(c){}if(ting.vip){l=ting.vip.genInitFn(r,s.vip_expiry)}}else{if(ting.vip){l=ting.vip.genInitFn("not")}}if(!s.bdName&&!s.bdEmail&&!s.bdMobile&&t.incomplete_user==1){i.sSourceIcon='<img src="'+t.source_icon+'" width="16" height="16" style="vertical-align:top;margin-right:3px" />'}i.avatar=t.avatar_small;p(i)}else{i.enable_fee=!!s.enable_fee;i.sTemplate="guest";if(ting.vip){l=ting.vip.genInitFn("anonymous")}p(null)}d(e);m(e);return o(i,l)}return f}("userbar")});
/** If u are interested in our code and would like to make it robust, just contact us^^ <@音乐前端> **/
/** Generated by M3D. **/